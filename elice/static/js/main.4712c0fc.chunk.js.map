{"version":3,"sources":["components/Columns/Columns.jsx","components/Courses/Courses.jsx","components/Summary/Summary.jsx","components/Affectations/Affectations.jsx","components/Statistics/Statistics.jsx","services/dataHandler.js","services/reactTableUtil.js","lib/munkrespp.js","containers/App/App.js","index.js","../deps/react-csv-reader/dist/react-csv-reader.js"],"names":["Columns","wishNums","i","this","props","wishCount","push","id","className","striped","bordered","hover","size","Array","from","columns","keys","map","el","key","Control","as","onChange","changeMode","value","get","state","changeWishNum","wishNum","disabled","changeAppealNum","appealNum","courses","Component","Courses","name","infos","last","changePlaces","CourseTile","Group","Row","controlId","Label","column","sm","type","minPlaces","min","maxPlaces","reservedPlaces","Summary","autoStudentCount","studentCount","manualStudentCount","md","borderless","autoMinPlaces","autoMaxPlaces","SearchBar","Search","ExportCSVButton","CSVExport","Affectations","inline","changeSeed","seed","variant","onClick","keyField","data","students","rtColumns","search","exportCSV","placeholder","searchProps","isAffecting","animation","role","aria-hidden","affect","length","csvProps","bootstrap4","classes","wrapperClasses","condensed","noDataIndication","pagination","paginationFactory","sizePerPage","hideSizePerPage","cellEdit","cellEditFactory","mode","blurToSave","afterSaveCell","oldValue","newValue","row","editRow","baseProps","Statistics","statistics","penalty2","penalty1","Object","isNaN","toFixed","dataHandler","replace","meta","Map","fields","lowercaseName","toLowerCase","includes","set","entries","wishCols","found","Set","rowNum","undefined","add","course","has","Math","max","floor","delete","reactTableUtil","cols","result","colName","col","dataField","text","sort","optionsAffec","label","courseName","editor","Type","SELECT","options","arrSum","arr","reduce","a","b","MunkressApp","wish_matrix","interest_matrix","wish_penalties","wish_min_places","wish_max_places","new_matrix","students_number","wishes_number","total_places","student_i","student_penalties","wish_j","wish_rank","wish_interest","penalty","next_penalty","coef","Error","round","places","_","place_k","wish_number","random","fill","indexes","assignments","wish_range","index","wish_i","interests_enabled","results","assignment","interest","console","log","matrix","total_min_places","create_square_matrix","create_square_matrix_without_interests","indices","computeMunkres","extract_assignments","slice","App","errorShown","errorMessage","filename","preProcess","extractColumns","updatedCourses","columnParser","setState","e","target","deletedWishNum","parseInt","form","countManualAffectation","toString","substring","courseIds","wishMatrix","studentId","wishList","limeSurveyCourseName","limeSurveyCourseRank","interestMatrix","interestList","limeSurveyInterest","courseId","count","affectationMode","values","acc","penalties","useAppeal","getTotalManualAffectations","getAutoMinPlaces","showError","getAutoMaxPlaces","appealCount","setTimeout","_affect","getStudentsWishMatrix","getCourseUnreservedMinPlaces","getCourseUnreservedMaxPlaces","computePenalties","wishMatrixAuto","filter","listMatrix","interestMatrixAuto","array1","array2","rng","seedRandom","j","shuffleArray2","getStudentsInterestMatrix","array","shuffleArray","courseNames","assignmentsAuto","MunkresApp","process","message","indexOf","analyze_results","reader","FileReader","onload","JSON","parse","readAsText","files","stringify","fileDownload","fluid","ref","style","display","loadState","saveState","refs","loadStateInput","click","cssClass","onFileLoaded","loadData","bind","onError","handleDataError","parserOptions","header","skipEmptyLines","transformHeader","sanitizeColumnName","inputId","changeColumnMode","changeColumnWishNum","changeColumnAppealNum","getTotalMinPlaces","getTotalMaxPlaces","getTotalReservedPlaces","show","onHide","hideError","Header","closeButton","Title","Body","Footer","ReactDOM","render","document","getElementById","module","exports","t","r","n","l","call","m","c","d","o","defineProperty","enumerable","Symbol","toStringTag","__esModule","create","default","prototype","hasOwnProperty","p","s","accept","cssInputClass","u","h","f","inputStyle","g","fileEncoding","v","y","createElement","htmlFor","assign","error","encoding","propTypes","string","oneOfType","element","func","isRequired","self","window","postMessage","test","location","protocol","dynamicTyping","dynamicTypingFunction","transform","worker","WORKERS_SUPPORTED","URL","webkitURL","BLOB_URL","createObjectURL","Blob","Worker","onmessage","userStep","step","userChunk","chunk","userComplete","complete","userError","input","config","workerId","NODE_STREAM_INPUT","download","readable","read","on","File","stream","unparse","delimiter","BAD_DELIMITERS","quotes","isArray","newline","quoteChar","escapeChar","RegExp","join","trim","constructor","Date","charAt","RECORD_SEP","String","fromCharCode","UNIT_SEP","BYTE_ORDER_MARK","LocalChunkSize","RemoteChunkSize","DefaultDelimiter","Parser","ParserHandle","NetworkStreamer","FileStreamer","StringStreamer","ReadableStreamStreamer","jQuery","fn","each","prop","toUpperCase","attr","file","inputElem","instanceConfig","extend","before","action","reason","splice","_handle","_finished","_completed","_halted","_input","_baseIndex","_partialLine","_rowCount","_start","_nextChunk","isFirstChunk","_completeResults","errors","chunkSize","streamer","_config","parseChunk","beforeFirstChunk","paused","aborted","cursor","preview","WORKER_ID","finished","concat","_sendError","_readChunk","_chunkLoaded","XMLHttpRequest","withCredentials","k","onerror","_chunkError","open","downloadRequestHeaders","setRequestHeader","send","status","readyState","getResponseHeader","substr","lastIndexOf","responseText","statusText","webkitSlice","mozSlice","FileReaderSync","pause","apply","arguments","resume","_streamData","_streamEnd","_streamError","_checkIsFinished","shift","_streamCleanUp","removeListener","pow","w","E","abort","R","forEach","C","parseFloat","code","split","comments","abs","successful","bestDelimiter","delimitersToGuess","getCharIndex","fastMode","z","L","U","S","x","O","I","T","q","nextDelim","quoteSearch","M","D","F","A","linebreak","truncated","terminate"],"mappings":"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","file":"static/js/main.4712c0fc.chunk.js","sourcesContent":["import React, {Component} from 'react';\n\nimport Table from 'react-bootstrap/Table'\nimport Form from 'react-bootstrap/Form'\n\nclass Columns extends Component {\n\n    render() {\n        let wishNums = [];\n        for (let i = 1; i <= this.props.wishCount; i++) {\n            wishNums.push(i);\n        }\n\n        return (\n            <div>\n                <h2>1. Liaison des données</h2>\n                <div id=\"columnsTable\" className=\"mb-3\">\n                    <Table striped bordered hover size=\"sm\">\n                        <thead>\n                        <tr>\n                            <th>Colonnes</th>\n                            <th>Mode</th>\n                            <th>Rang du Vœu</th>\n                            <th>Attrait du Module</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        {\n                            Array.from(this.props.columns.keys()).map((el) => {\n                                return <tr key={el}>\n                                    <td>{el}</td>\n                                    <td>\n                                        <Form.Control as=\"select\"\n                                                      id={el}\n                                                      onChange={this.props.changeMode}\n                                                      value={this.props.columns.get(el).state}\n                                                      size=\"sm\">\n                                            <option value=\"discard\">Ignorer</option>\n                                            <option value=\"wish\">Voeu</option>\n                                            <option value=\"appeal\">Attrait</option>\n                                            <option value=\"information\">Information</option>\n                                        </Form.Control>\n                                    </td>\n                                    <td>\n                                        <Form.Control as=\"select\"\n                                                      id={el}\n                                                      onChange={this.props.changeWishNum}\n                                                      value={this.props.columns.get(el).wishNum}\n                                                      disabled={this.props.columns.get(el).state !== \"wish\"}\n                                                      size=\"sm\">\n                                            {\n                                              this.props.columns.get(el).wishNum === -1 && <option value={-1}>N/A</option>\n                                            }\n                                            {\n                                              wishNums.map((el) => {\n                                                return <option key={el} value={el}>{el}</option>;\n                                              })\n                                            }\n                                        </Form.Control>\n                                    </td>\n                                    <td>\n                                        <Form.Control as=\"select\"\n                                                      id={el}\n                                                      onChange={this.props.changeAppealNum}\n                                                      value={this.props.columns.get(el).appealNum}\n                                                      disabled={this.props.columns.get(el).state !== \"appeal\"}\n                                                      size=\"sm\">\n                                            {\n                                              this.props.columns.get(el).appealNum === -1 && <option value={-1}>N/A</option>\n                                            }\n                                            {\n                                              Array.from(this.props.courses.keys()).map((el) => {\n                                                return <option key={el} value={el}>{el}</option>;\n                                              })\n                                            }\n                                        </Form.Control>\n                                    </td>\n                                </tr>\n                            })\n                        }\n                        </tbody>\n                    </Table>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Columns;\n","import React, {Component} from 'react';\nimport Form from \"react-bootstrap/Form\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\n\nclass Courses extends Component {\n    render() {\n        return (\n            <div>\n                <h2>2. Modules</h2>\n\n                {Array.from(this.props.courses.keys(), (name, i) => {\n                    return <CourseTile key={name}\n                                       name={name}\n                                       infos={this.props.courses.get(name)}\n                                       last={i+1 === this.props.courses.size}\n                                       changePlaces={this.props.changePlaces}/>;\n                })}\n            </div>\n        );\n    }\n}\n\nclass CourseTile extends Component {\n    render() {\n        return (\n            <div>\n                <b>{this.props.name}</b><br/>\n                <Form id={this.props.name}>\n                    <Form.Group as={Row} className=\"mb-0\" controlId=\"\">\n                        <Form.Label column sm=\"9\" className=\"py-0 mt-auto\">Nombre minimum d'étudiants&nbsp;:</Form.Label>\n                        <Col sm=\"3\">\n                            <Form.Control size=\"sm\" type=\"number\" name=\"min\" onChange={this.props.changePlaces} value={this.props.infos.minPlaces} min=\"0\"/>\n                        </Col>\n                    </Form.Group>\n                    <Form.Group as={Row} className=\"mb-0\">\n                        <Form.Label column sm=\"9\" className=\"py-0 mt-auto\">Nombre maximum d'étudiants&nbsp;:</Form.Label>\n                        <Col sm=\"3\">\n                            <Form.Control size=\"sm\" type=\"number\" name=\"max\" onChange={this.props.changePlaces} value={this.props.infos.maxPlaces} min=\"0\"/>\n                        </Col>\n                    </Form.Group>\n                    <Form.Group as={Row} className=\"mb-0\">\n                        <Form.Label column sm=\"9\" className=\"py-0 mt-auto\">Nombre de places réservées&nbsp;:</Form.Label>\n                        <Col sm=\"3\">\n                            <Form.Control size=\"sm\" type=\"number\" name=\"reserved\" onChange={this.props.changePlaces} value={this.props.infos.reservedPlaces} min=\"0\"/>\n                        </Col>\n                    </Form.Group>\n                </Form>\n                {!this.props.last && <hr/>}\n            </div>\n        );\n    }\n}\n\nexport default Courses;\n","import React, {Component} from 'react';\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Table from \"react-bootstrap/Table\";\n\nimport \"./summary.css\"\n\nclass Summary extends Component {\n    render() {\n        let autoStudentCount = this.props.studentCount - this.props.manualStudentCount;\n\n        return (\n            <div>\n                <h2>3. Récapitulatif</h2>\n\n                <Row>\n                    <Col md=\"6\">\n                        <Table borderless>\n                            <tbody>\n                                <tr>\n                                    <td>Nombre d'étudiants au total : </td>\n                                    <td>{this.props.studentCount}</td>\n                                </tr>\n                                <tr>\n                                    <td>Nombre de places minimales : </td>\n                                    <td>{this.props.minPlaces}</td>\n                                </tr>\n                                <tr>\n                                    <td>Nombre de places maximales : </td>\n                                    <td>{this.props.maxPlaces}</td>\n                                </tr>\n                                <tr>\n                                    <td>Nombre de places réservées : </td>\n                                    <td>{this.props.reservedPlaces}</td>\n                                </tr>\n                            </tbody>\n                        </Table>\n                    </Col>\n\n                    <Col md=\"6\">\n                        <Table borderless>\n                            <tbody>\n                            <tr>\n                                <td>Étudiants pour affect. auto. : </td>\n                                <td>{autoStudentCount}</td>\n                            </tr>\n                            <tr>\n                                <td>Places min. pour affect. auto. : </td>\n                                <td className={this.props.autoMinPlaces > autoStudentCount ? \"text-danger\" : \"text-success\"}>\n                                    {this.props.autoMinPlaces}\n                                </td>\n                            </tr>\n                            <tr>\n                                <td>Places max. pour affect. auto. : </td>\n                                <td className={autoStudentCount > this.props.autoMaxPlaces ? \"text-danger\" : \"text-success\"}>\n                                    {this.props.autoMaxPlaces}\n                                </td>\n                            </tr>\n                            <tr>\n                                <td>Étudiants en affect. manuelle : </td>\n                                <td>{this.props.manualStudentCount}</td>\n                            </tr>\n                            </tbody>\n                        </Table>\n                    </Col>\n                </Row>\n            </div>\n        );\n    }\n}\n\nexport default Summary;","import React, {Component} from 'react';\n\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport ToolkitProvider, {CSVExport, Search} from 'react-bootstrap-table2-toolkit';\nimport paginationFactory from 'react-bootstrap-table2-paginator';\nimport Button from 'react-bootstrap/Button';\nimport Spinner from 'react-bootstrap/Spinner';\nimport cellEditFactory from 'react-bootstrap-table2-editor';\n\nimport \"./affectations.css\"\nimport Form from \"react-bootstrap/Form\";\n\nconst {SearchBar} = Search;\nconst {ExportCSVButton} = CSVExport;\n\nclass Affectations extends Component {\n    render() {\n        return (\n            <div>\n                <h2>4. Affectations</h2>\n\n                <Form inline className=\"mb-2\" id=\"seed\">\n                    <Form.Label>Graine&nbsp;:&nbsp;</Form.Label>\n                    <Form.Control size=\"sm\" type=\"text\" name=\"seed\" onChange={this.props.changeSeed} value={this.props.seed}/>\n                    <Button variant=\"primary\" size=\"sm\" name=\"random_seed\" onClick={this.props.changeSeed}>&#8635;</Button>\n                </Form>\n\n                <ToolkitProvider\n                    keyField='id'\n                    data={this.props.students}\n                    columns={this.props.rtColumns}\n                    search\n                    exportCSV\n                >\n\n                    {\n                        props => (\n                            <div>\n                                <SearchBar placeholder=\"Recherche...\" {...props.searchProps} />\n                                <div className=\"float-right\">\n                                    {this.props.isAffecting && <Spinner as=\"span\"\n                                                                        className=\"mr-2\"\n                                                                        animation=\"border\"\n                                                                        size=\"sm\"\n                                                                        role=\"status\"\n                                                                        aria-hidden=\"true\"/>}\n                                    <Button className=\"btn-primary mr-2\"\n                                            onClick={() => this.props.affect(false)}\n                                            disabled={this.props.isAffecting || this.props.students.length === 0}>\n                                        Ventiler sans attraits\n                                    </Button>\n                                    <Button className=\"btn-primary mr-2\"\n                                            onClick={() => this.props.affect(true)}\n                                            disabled={this.props.isAffecting || this.props.students.length === 0}>\n                                        Ventiler avec attraits\n                                    </Button>\n                                    <ExportCSVButton className=\"btn-primary\"\n                                                     disabled={this.props.isAffecting || this.props.students.length === 0}\n                                                     {...props.csvProps}>Exporter en CSV</ExportCSVButton>\n                                </div>\n                                <hr/>\n                                <BootstrapTable\n                                    bootstrap4\n                                    classes=\"table-sm\"\n                                    wrapperClasses=\"table-responsive\"\n                                    striped\n                                    hover\n                                    condensed\n                                    noDataIndication=\"Pas de données\"\n                                    pagination={paginationFactory({sizePerPage: 10, hideSizePerPage: false})}\n                                    cellEdit={cellEditFactory({\n                                        mode: 'click',\n                                        blurToSave: true,\n                                        afterSaveCell: (oldValue, newValue, row, column) => { this.props.editRow(row); }\n                                    })}\n                                    {...props.baseProps}\n                                />\n                            </div>\n                        )\n                    }\n                </ToolkitProvider>\n            </div>\n        );\n    }\n}\n\nexport default Affectations;\n","import React, {Component} from 'react';\n\nimport Table from 'react-bootstrap/Table'\n/*import Highcharts from 'highcharts'\nimport HighchartsReact from 'highcharts-react-official'*/\n\nclass Statistics extends Component {\n\n    /*constructor(props) {\n        super(props);\n\n        this.options = {\n          title: {\n            text: 'Répartition des voeux'\n          },\n          series: [{\n            data: [1, 2, 3]\n          }]\n        };\n    }*/\n\n    render() {\n        if (!this.props.statistics || !this.props.statistics.courses)\n            return null;\n\n        this.courses = Array.from(this.props.courses.keys());\n        return (\n            <div>\n                <h2>5. Indicateurs de satisfaction</h2>\n                <h4>Pénalité totale de la ventilation : {this.props.statistics.penalty2 || this.props.statistics.penalty1}</h4>\n                <div id=\"columnsTable\" className=\"mb-3\">\n                    <Table striped bordered hover size=\"sm\">\n                        <thead>\n                        <tr>\n                            <th>Module</th>\n                            <th>Nombre d'étudiants</th>\n                            <th>Répartition des Voeux</th>\n                            <th>Pénalité relative du module</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        {\n                            Object.keys(this.props.statistics.courses).map((el) => {\n                                return <tr key={this.courses[el]}>\n                                    <td>\n                                        {this.courses[el]}\n                                    </td>\n                                    <td>\n                                        {this.props.statistics.courses[el].students}\n                                    </td>\n                                    <td>\n                                        {\n                                            Object.keys(this.props.statistics.courses[el]).map((i) => {\n                                                return !isNaN(i) && <span key={i}>Nombre de voeux {i} : {this.props.statistics.courses[el][i] || 0}<br/></span>\n                                            })\n                                        }\n                                    </td>\n                                    <td>\n                                        {(this.props.statistics.courses[el].penalty1 * 100 / this.props.statistics.penalty1).toFixed(1)}%\n                                    </td>\n                                </tr>\n                            })\n                          }\n                        </tbody>\n                    </Table>\n                </div>\n                {/*\n                  <HighchartsReact\n                    highcharts={Highcharts}\n                    options={this.options}\n                  />\n                */}\n            </div>\n        );\n    }\n}\n\nexport default Statistics;\n","class dataHandler {\n\n    static sanitizeColumnName(name) {\n        return name.replace(\"[\", \"{\").replace(\"]\", \"}\").replace(\".\", \"_\");\n    }\n\n    static preProcess(data) { //brackets, new columns\n        for (let row in data) {\n            data[row][\"id\"] = row;\n            data[row][\"affectationMode\"] = \"Automatique\";\n            data[row][\"result\"] = \"Non calculé\";\n        }\n        return data;\n    }\n\n    static extractColumns(meta) {\n        let columns = new Map();\n\n        let wishCount = 1;\n        for (let i in meta.fields) {\n            let name = meta.fields[i];\n            if (name !== \"\" && name !== \"\\n\" && name !== \"\\r\\n\") {\n                let lowercaseName = name.toLowerCase();\n                let state = \"discard\";  //information/discard(will not be used)/wish/appeal\n                let wishNum = -1;\n                if (lowercaseName.includes(\"voeu\") || lowercaseName.includes(\"vœu\")) {\n                    state = \"wish\";\n                    wishNum = wishCount++;\n                }\n                else if (lowercaseName.includes(\"attrait\") || lowercaseName.includes(\"interet\") || lowercaseName.includes(\"intérêt\"))\n                    state = \"appeal\";\n                else if (lowercaseName.includes(\"nom\") ||\n                         lowercaseName.includes(\"adresse\") ||\n                         lowercaseName.includes(\"address\") ||\n                         lowercaseName.includes(\"mail\") ||\n                         lowercaseName.includes(\"courriel\") ||\n                         lowercaseName.includes(\"groupe\") ||\n                         lowercaseName.includes(\"classe\"))\n                    state = \"information\";\n\n                columns.set(name, {\n                    state: state,\n                    wishNum: wishNum,\n                    appealNum: -1\n                });\n            }\n        }\n\n        return columns;\n    }\n\n    /** Find all distinct affectation options */\n    static updatedCourses(courses, data, columns) {\n        courses = new Map(courses.entries());\n\n        let wishCols = [];\n        //Get the columns set as wish Columns by the user\n        for (let el of columns.keys()) {\n            if (columns.get(el).wishNum !== -1) {\n                wishCols.push(el);\n            }\n        }\n\n        let found = new Set();\n\n        //Find all the possible courses\n        for (let rowNum in data) { //Go through all the rows\n            let row = data[rowNum];\n            for (let i in wishCols) { //Go through all the wish columns\n                if (row[wishCols[i]] !== undefined) {\n                    found.add(row[wishCols[i]]);\n                }\n            }\n        }\n\n        for (let course of found) {\n            if (!courses.has(course)) {\n                courses.set(course, {\n                    minPlaces: Math.max(0, Math.floor(data.length/found.size-5)), //Min places in this course\n                    maxPlaces: Math.floor(data.length/found.size+5), //Max places in this course\n                    reservedPlaces: 0, //Places spared for other students\n                });\n            }\n        }\n\n\n        // Remove old courses\n        for (let course of courses.keys()) {\n            if (!found.has(course))\n                courses.delete(course);\n        }\n\n        return courses;\n    }\n}\n\nexport default dataHandler;\n","import {Type} from 'react-bootstrap-table2-editor';\n\nclass reactTableUtil{\n    static columnParser(cols, courses) {\n        let result = [];\n        for(let colName of cols.keys()){\n            let col = cols.get(colName);\n            if(col.state !== \"discard\"){\n                if(col.state === \"wish\"){\n                    result.push({\n                        dataField: colName,\n                        text: \"Vœu \" + col.wishNum,\n                        sort: true\n                    });\n                }else{\n                    result.push({\n                        dataField: colName,\n                        text: colName,\n                        sort: true\n                    });\n                }\n            }\n        }\n\n        //Adding the affectation mode dropdown field\n        let optionsAffec = [{value: \"Automatique\", label: \"Automatique\"}];\n        for (let courseName of courses.keys()) {\n            optionsAffec.push({\n                value: courseName,\n                label: courseName\n            });\n        }\n        result.push({\n            dataField: 'affectationMode',\n            text: \"Mode d'affectation\",\n            editor: {\n                        type: Type.SELECT,\n                        options: optionsAffec\n                    }\n        });\n\n        //Adding the result column\n        result.push({\n            dataField: \"result\",\n            text: \"Résultat d'affectation\",\n            sort: true\n        });\n        return result\n    }\n\n}\n\nexport default reactTableUtil;\n","/**\n * Introduction\n * ============\n *\n * The Munkres Plus Plus module provides an upper layer to the Munkres module,\n * which is an implementation of the Munkres algorithm (Hungarian module or \n * Kuhn-Munkres algorithm).\n * The Munkres algorithm is useful for solving Assignment problems.\n *\n *\n * Assignment Problem\n * ==================\n *\n * Let C be an n×n-matrix representing the costs of each of n workers\n * to perform any of n jobs. The assignment problem is to assign jobs to\n * workers in a way that minimizes the total cost. Since each worker can perform\n * only one job and each job can be assigned to only one worker the assignments\n * represent an independent set of the matrix C.\n *\n * One way to generate the optimal set is to create all permutations of\n * the indices necessary to traverse the matrix so that no row and column\n * are used more than once.\n * While this approach works fine for small matrices, it does not scale. It\n * executes in O(n!) time.\n * The Munkres algorithm runs in O(n³) time, rather than O(n!).\n *\n * source: https://github.com/addaleax/munkres-js/blob/master/munkres.js\n *\n *\n * Specific Problem\n * ==================\n * \n * This module aims to solve this problem:\n * Let W an nxm-matrix representing the wish list of n students for m courses\n * The values of the matrix are the ranks of the courses, and are in [1; m]\n * Let I an nxm-matrix representing the interest of n student for m courses\n * The values of the matrix are in: {\n *   -2 (not interesting at all);\n *   -1 (not really interesting);\n *    1 (interesting);\n *    2 (very interesting)\n * }\n * Let N an m-array representing the minimum number of students we want to\n * have in each course.\n * Let X an m-array representing the maximum number of students we can\n * have in each course.\n * Let C an m-array representing the costs of assigning students to a course\n * in their wish list.\n *\n *\n * Specific solution\n * =================\n *\n * To use the Munkres algorithm, the matrix given as input must be square,\n * and no other parameter can be added. So we have to transform all the inputs\n * listed in the previous section in a single matrix.\n * \n * Step 1:\n * We replace every rank in W (the wish matrix) by its cost in the array C.\n *\n * Step 2:\n * We duplicate each column in W, as many times as there are places in the\n * course. So we get an nxl-matrix. l is the sum of the max number of places\n * for each course.\n *\n * Step 3:\n * We add \"phantom students\" or \"fake students\" to have a square matrix: \n * we insert (l-n) rows at the end of the matrix, each row is full of zeros.\n * Which means that to whatever we assign a phantom student, the global penalty\n * doesn't change.\n * \n * Step 4:\n * In step 3, we have managed the maximum places for each course. Now, for the\n * minimums, the idea is instead of inserting rows full of zeros, to insert \n * rows with a very high cost for the Ni places of each course. Ni is the\n * minimum number of students we want to have for the course i.\n * This way, we are sure the munkres algorithm will always assign valid \n * students to the Ni places of each course.\n *\n * Step 5:\n * To consider the interest matrix when creating our new matrix, the idea was\n * to increase the penalties in the matrix a little.\n * The formula which was used is this one:\n *  interest =  2 (\"very interesting\")          ===> do nothing\n *  interest =  1 (\"interesting\")               ===> add 33% of the difference\n *              between the actual penalty and the next penalty in the C array\n *  interest = -1 (\"not really interesting\")    ===>  add 66% of the difference\n *              between the actual penalty and the next penalty in the C array\n *  interest = -2 (\"not interesting at all\")    ===> add 100% of the difference\n *              between the actual penalty and the next penalty in the C array\n * This way, the cost of assigning a 3rd wish which is considered \n * \"very interesting\" and the cost of assigning a 2nd wish which is considered\n * \"not interesting at all\" are the same.\n *\n * After step 5 is performed, we get a result matrix we can use as input to\n * the munkres algorithm. After that we have to do some postprocessing to \n * remove the \"phantom students\".\n *\n *\n * Example:\n * W = [ [1,2, 3], [1, 3, 2], [2,1, 3], [2, 3,1], [3,1,2], [ 3, 2,1] ]\n * I = [ [2,1,-2], [2,-1,-1], [1,1,-2], [2,-2,2], [2,2,2], [-2,-2,2] ]\n * N = [1,1,1]\n * X = [3,4,3]\n * C = [0,1,8]\n *\n * Step 1:\n * R = [ [0,1,8], [0,8,1], [1,0,8], [1,8,0], [8,0,1], [8,1,0] ]\n * Step 2:\n * R = [ [0,0,0,1,1,1,1,8,8,8], \n *       [0,0,0,8,8,8,8,1,1,1],\n *       [1,1,1,0,0,0,0,8,8,8],\n *       [1,1,1,8,8,8,8,0,0,0],\n *       [8,8,8,0,0,0,0,1,1,1],\n *       [8,8,8,1,1,1,1,0,0,0] ]\n * Step 3:\n * R = [ [0,0,0,1,1,1,1,8,8,8],\n *       [0,0,0,8,8,8,8,1,1,1],\n *       [1,1,1,0,0,0,0,8,8,8],\n *       [1,1,1,8,8,8,8,0,0,0],\n *       [8,8,8,0,0,0,0,1,1,1],\n *       [8,8,8,1,1,1,1,0,0,0],\n *       [0,0,0,0,0,0,0,0,0,0],\n *       [0,0,0,0,0,0,0,0,0,0],\n *       [0,0,0,0,0,0,0,0,0,0],\n *       [0,0,0,0,0,0,0,0,0,0] ]\n * Step 4:\n * R = [ [   0, 0, 0,  1, 1, 1, 1,   8, 8, 8 ], \n *       [   0, 0, 0,  8, 8, 8, 8,   1, 1, 1 ],\n *       [   1, 1, 1,  0, 0, 0, 0,   8, 8, 8 ],\n *       [   1, 1, 1,  8, 8, 8, 8,   0, 0, 0 ],\n *       [   8, 8, 8,  0, 0, 0, 0,   1, 1, 1 ],\n *       [   8, 8, 8,  1, 1, 1, 1,   0, 0, 0 ],\n *       [ 999, 0, 0,999, 0, 0, 0, 999, 0, 0 ],\n *       [ 999, 0, 0,999, 0, 0, 0, 999, 0, 0 ],\n *       [ 999, 0, 0,999, 0, 0, 0, 999, 0, 0 ],\n *       [ 999, 0, 0,999, 0, 0, 0, 999, 0, 0 ] ]\n * Step 5:\n * R = [ [   0,  0,  0,   3,  3,  3,  3,  16, 16, 16 ], \n *       [   0,  0,  0,  13, 13, 13, 13,   6,  6,  6 ],\n *       [   3,  3,  3,   0,  0,  0,  0,  16, 16, 16 ],\n *       [   1,  1,  1,  16, 16, 16, 16,   0,  0,  0 ],\n *       [   8,  8,  8,   0,  0,  0,  0,   1,  1,  1 ],\n *       [  16, 16, 16,   8,  8,  8,  8,   0,  0,  0 ],\n *       [ 999,  0,  0, 999,  0,  0,  0, 999,  0,  0 ],\n *       [ 999,  0,  0, 999,  0,  0,  0, 999,  0,  0 ],\n *       [ 999,  0,  0, 999,  0,  0,  0, 999,  0,  0 ],\n *       [ 999,  0,  0, 999,  0,  0,  0, 999,  0,  0 ] ]\n *\n *\n *\n * Notes\n * ======\n *\n * - The number of students must be lower or equal than the sum of the places\n *   of each course\n * - The sum of the minimum places of each course must be lower or equal than\n *   the number of students.\n * - The module operates on a *copy* of the arrays and matrixes.\n * - The caller must not use a linear function as a generator for the penalties\n *   like : [0,100,200,300,400,500]\n * - The caller should use the penalties generated by the function x^3:\n *   [0, 1, 8, 27, 64, 125, 216, 343, 512, 729]\n * - In step 5, as there is not a next penalty in the C-array for the last wish\n *   we use 2 * last penalty as a next penalty.\n * - The munkresspp module needs the munkres module to run. \n *\n *\n * Example of use\n * ===============\n *\n * wishs = [[1,2,3], [2,3,1], [3,1,2], [3,2,1]];\n * interests = [[1,-2,-2], [2,-1,2], [2,2,1], [-1,1,2]];\n * penalties = [0,1,8]\n * mins = [1,1,0]\n * maxs = [2,2,2]\n *\n * assignments = process( penalties, mins, maxs, wishs, interests );\n * stats = analyze_results(assignments, penalties, mins, maxs, wishs, interests);\n *\n * console.log(assignments);\n * console.log(stats);\n *\n *\n * References\n * ==========\n *\n * 1. http://www.public.iastate.edu/~ddoty/HungarianAlgorithm.html\n *\n * 2. Harold W. Kuhn. The Hungarian Method for the assignment problem.\n *    *Naval Research Logistics Quarterly*, 2:83-97, 1955.\n *\n * 3. Harold W. Kuhn. Variants of the Hungarian method for assignment\n *    problems. *Naval Research Logistics Quarterly*, 3: 253-258, 1956.\n *\n * 4. Munkres, J. Algorithms for the Assignment and Transportation Problems.\n *    *Journal of the Society of Industrial and Applied Mathematics*,\n *    5(1):32-38, March, 1957.\n *\n * 5. https://en.wikipedia.org/wiki/Hungarian_algorithm\n *\n * 6. https://github.com/addaleax/munkres-js\n *\n *\n * Copyright and License\n * =====================\n * \n * Copyright 2019 Mohamed CHALLAL.\n * \n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport computeMunkres from \"munkres-js\";\n\n// return the sum of the values of an array \n// example : arrSum([20, 10, 5, 10]) -> 45\nconst arrSum = arr => arr.reduce((a,b) => a + b, 0);\n\nconst INF = 999999999;\n\n\nclass MunkressApp {\n\n    /**\n     * [Preprocessing]\n     * create square matrix containing the penalties of each student for each wish.\n     * @param {!Array<Array<int>>} wish_matrix is a matrix, each row is a student,\n     *      each column is a course, each value is the rank of the course in the\n     *      wish list of the student. The values are in [1 ; number of courses]\n     * @param {!Array<Array<int>>} interest_matrix is a matrix, each row is a\n     *      student, each column is a course, each value is the interest of the\n     *      student for the course. The values are in: {\n     *        -2 (not interesting at all);\n     *        -1 (not really interesting);\n     *         1 (interesting);\n     *         2 (very interesting)\n     *      }\n     * @param {!Array<int>} wish_penalties represents the penalties while assigning\n     *      a student to one of its wishs\n     * @param {!Array<int>} wish_min_places is the minimum number of students we\n     *      must have for each wish\n     * @param {!Array<int>} wish_max_places is the maximum number of students we\n     *      can have for each wish\n     * @return {!Array<Array<int>>} this matrix can be used as an input for the\n     *      munkres algorithm\n     */\n\n    static create_square_matrix(\n        wish_matrix,\n        interest_matrix,\n        wish_penalties,\n        wish_min_places,\n        wish_max_places\n    ) {\n        let new_matrix = [];\n        let students_number = wish_matrix.length;\n        let wishes_number = wish_penalties.length;\n        let total_places = arrSum(wish_max_places);\n\n        for (let student_i = 0; student_i < students_number; student_i++) {\n            let student_penalties = [];\n            for (let wish_j = 0; wish_j < wishes_number; wish_j++) {\n                let wish_rank = wish_matrix[student_i][wish_j];\n                let wish_interest = interest_matrix[student_i][wish_j];\n                let penalty = wish_penalties[wish_rank - 1];\n                let next_penalty = 0;\n\n                if (wish_rank < wish_penalties.length) {\n                    next_penalty = wish_penalties[wish_rank];\n                } else {\n                    next_penalty = 2 * penalty;\n                }\n\n                // Lagrange interpolation we cas use instead of the switch bloc\n                // coef = −0.0283333x^3 + 0.00166667x^2 − 0.136667x + 0.493333\n                let coef = 0;\n                switch (wish_interest) {\n                    case -2:\n                        coef = 1;\n                        break;\n\n                    case -1:\n                        coef = 0.66;\n                        break;\n\n                    case 1:\n                        coef = 0.33;\n                        break;\n\n                    case 2:\n                        coef = 0;\n                        break;\n\n                    case null:\n                        throw Error(\"Invalid null value for wish interest !\");\n\n                    case undefined:\n                        throw Error(\"Invalid undefined value for wish interest !\");\n\n                    default:\n                        coef = 0;\n                        throw Error(\"Invalid value for wish interest !\\n\"\n                            + \"Wish interest value must be in:\\n\"\n                            + \"(very interesting : 2,\\n\"\n                            + \" interesting : 1,\\n\"\n                            + \" not really interesting : -1,\\n\"\n                            + \" not interesting at all : -2)\");\n\n                }\n                penalty += Math.round(coef * (next_penalty - penalty));\n\n                let places = wish_max_places[wish_j];\n                for (let _ = 0; _ < places; _++) {\n                    student_penalties.push(penalty);\n                }\n            }\n            new_matrix.push(student_penalties)\n        }\n\n        // add phantom students\n        for (let i = students_number; i < total_places; i++) {\n            let student_penalties = [];\n            for (let wish_j = 0; wish_j < wishes_number; wish_j++) {\n                for (let place_k = 0; place_k < wish_min_places[wish_j]; place_k++) {\n                    student_penalties.push(INF);\n                }\n                for (let place_k = 0;\n                     place_k < wish_max_places[wish_j] - wish_min_places[wish_j];\n                     place_k++\n                ) {\n                    student_penalties.push(0);\n                }\n            }\n            new_matrix.push(student_penalties);\n        }\n\n        return new_matrix;\n    }\n\n\n    /**\n     * [Preprocessing]\n     * create square matrix containing the penalties of each student for each wish.\n     * @param {!Array<Array<int>>} wish_matrix is a matrix, each row is a student,\n     *      each column is a course, each value is the rank of the course in the\n     *      wish list of the student. The values are in [1 ; number of courses]\n     * @param {!Array<int>} wish_penalties represents the penalties while assigning\n     *      a student to one of its wishs\n     * @param {!Array<int>} wish_min_places is the minimum number of students we\n     *      must have for each wish\n     * @param {!Array<int>} wish_max_places is the maximum number of students we\n     *      can have for each wish\n     * @return {!Array<Array<int>>} this matrix can be used as an input for the\n     *      munkres algorithm\n     */\n    static create_square_matrix_without_interests(\n        wish_matrix,\n        wish_penalties,\n        wish_min_places,\n        wish_max_places\n    ) {\n        let new_matrix = [];\n        let students_number = wish_matrix.length;\n        let wishes_number = wish_penalties.length;\n        let total_places = arrSum(wish_max_places);\n\n        for (let student_i = 0; student_i < students_number; student_i++) {\n            let student_penalties = [];\n            for (let wish_j = 0; wish_j < wishes_number; wish_j++) {\n                let wish_rank = wish_matrix[student_i][wish_j];\n                let penalty = wish_penalties[wish_rank - 1];\n\n                let places = wish_max_places[wish_j];\n                for (let _ = 0; _ < places; _++) {\n                    student_penalties.push(penalty);\n                }\n            }\n            new_matrix.push(student_penalties)\n        }\n\n        // add phantom students\n        for (let i = students_number; i < total_places; i++) {\n            let student_penalties = [];\n            for (let wish_j = 0; wish_j < wishes_number; wish_j++) {\n                for (let place_k = 0; place_k < wish_min_places[wish_j]; place_k++) {\n                    student_penalties.push(INF);\n                }\n                for (let place_k = 0;\n                     place_k < wish_max_places[wish_j] - wish_min_places[wish_j];\n                     place_k++\n                ) {\n                    student_penalties.push(0);\n                }\n            }\n            new_matrix.push(student_penalties);\n        }\n\n        return new_matrix;\n    }\n\n\n    /**\n     * generate a random wish matrix and a random interest matrix\n     * @param {!int} students_number is the number of rows the matrix will have\n     * @param {!int} wish_number is the number of columns the matrix will have\n     * @return {!Object} a dictionnary containing the wish matrix\n     *      and the interest matrix\n     */\n    static generate_random_matrix(students_number, wish_number) {\n        let wish_matrix = [];\n        let interest_matrix = [];\n        for (let student_i = 0; student_i < students_number; student_i++) {\n            let arr = [];\n            for (let wish_j = 0; wish_j < wish_number; wish_j++) {\n                arr.push(Math.floor(Math.random() * wish_number) + 1);\n            }\n            wish_matrix.push(arr);\n            interest_matrix.push(new Array(wish_number).fill(-1));\n        }\n        return {\"wish\": wish_matrix, \"interest\": interest_matrix};\n    }\n\n\n    /**\n     * [Postprocessing]\n     * extract the wish_index (1 indexation) of the students' places\n     * @param {!Array<Array<int>>} indexes is an array of arrays with a length of 2\n     *      the first value is the index of the student (0 indexation)\n     *      the second value is the index of the place (0 indexation)\n     * @param {!Array<int>} wish_max_places is the maximum number of students we\n     *      can have for each wish\n     * @return {!Array<int>}\n     *      the index of the array is the index of the student (0 indexation)\n     *      the value is the index of the wish (the course) (1 indexation)\n     */\n    static extract_assignments(indexes, wish_max_places) {\n        let assignments = [];\n        let wishes_number = wish_max_places.length;\n\n        // wish_range contain the global index of the first place of each course\n        // example: places=[10, 20, 5] - wish_range=[0, 10, 30]\n        let wish_range = new Array(wishes_number).fill(0);\n        let index = 0;\n        for (let wish_i = 0; wish_i < wishes_number; wish_i++) {\n            wish_range[wish_i] = index;\n            index += wish_max_places[wish_i];\n        }\n\n        for (let i = 0; i < indexes.length; i++) {\n            let wish_i = 0;\n            while (wish_i < wishes_number && indexes[i][1] >= wish_range[wish_i]) {\n                wish_i += 1;\n            }\n            assignments.push(wish_i); // 1 indexation\n        }\n        return assignments;\n    }\n\n\n    /**\n     * this function performs some statistics about\n     *      the assignments made with the munkres algorithm.\n     * @param {!Array<int>} assignments\n     *      the index of the array is the index of the student (0 indexation)\n     *      the value is the index of the wish (the course) (1 indexation)\n     * @param {!Array<int>} wish_penalties represents the penalties while assigning\n     *      a student to one of its wishs\n     * @param {!Array<int>} wish_min_places is the minimum number of students we\n     *      must have for each wish\n     * @param {!Array<int>} wish_max_places is the maximum number of students we\n     *      can have for each wish\n     * @param {!Array<Array<int>>} wish_matrix is a matrix, each row is a student,\n     *      each column is a course, each value is the rank of the course in the\n     *      wish list of the student. The values are in [1 ; number of courses]\n     * @param {Array<Array<int>>} interest_matrix is a matrix, each row is a\n     *      student, each column is a course, each value is the interest of the\n     *      student for the course. The values are in: {\n     *        -2 (not interesting at all);\n     *        -1 (not really interesting);\n     *         1 (interesting);\n     *         2 (very interesting)\n     *      }\n     *      This parameter is optionnal.\n     * @return {!Object} a dictionnary which contains different statistics about\n     *      the assignments made with the munkres algorithm.\n     *      This is the structure of the result:\n     *      {\n     *        \"penalty1\": int, // the global penalty without the interests\n     *        \"penalty2\": int, // the global penalty with the interests\n     *        \"students\": [\n     *          {\n     *            \"assignment\": int, //the course to which the student is assigned\n     *            \"wish_rank\": int, // the rank of the wish\n     *            \"interest\": int, // the interest of the student for the course\n     *            \"penalty1\": int, // the penalty without the interest\n     *            \"penalty2\": int, // the penalty with the interest\n     *          },\n     *          ...\n     *        ],\n     *        \"courses\": [\n     *          {\n     *            \"students\": int, // number of students assigned to the course\n     *            1: int, // number of students who put the course as their\n     *                    // first wish and were assigned to the course\n     *            ...\n     *          },\n     *          ...\n     *        ],\n     *        \"wishes\": {\n     *          1: int, // number of students who got their first wish\n     *          ...\n     *        }\n     *      }\n     *      If the interests are disabled (no attribute interest_matrix),\n     *      penalty2 will not appear in the result.\n     */\n     static analyze_results(\n        assignments,\n        wish_penalties,\n        wish_min_places,\n        wish_max_places,\n        wish_matrix,\n        interest_matrix\n    ) {\n        let students_number = wish_matrix.length;\n        let wishes_number = wish_penalties.length;\n        let interests_enabled = (typeof interest_matrix !== 'undefined');\n\n        let results = {\n            \"penalty1\": 0,\n            \"students\": [],\n            \"courses\": [],\n            \"wishes\": {}\n        };\n        if (interests_enabled) {\n            results[\"penalty2\"] = 0;\n        }\n\n        for (let i = 0; i < wishes_number; i++) {\n            results[\"courses\"].push({\n                \"students\": 0,\n                \"penalty1\": 0\n            });\n            if (interests_enabled) {\n                results[\"courses\"][i][\"penalty2\"] = 0;\n            }\n        }\n\n        for (let i = 0; i < students_number; i++) {\n            let assignment = assignments[i];\n            let wish_rank = wish_matrix[i][assignment - 1];\n            let penalty1 = wish_penalties[wish_rank - 1];\n\n            results[\"penalty1\"] += penalty1;\n            results[\"students\"].push({\n                \"assignment\": assignment,\n                \"wish_rank\": wish_rank,\n                \"penalty1\": penalty1\n            });\n\n            if (wish_rank in results[\"wishes\"]) {\n                results[\"wishes\"][wish_rank] += 1;\n            } else {\n                results[\"wishes\"][wish_rank] = 1;\n            }\n\n            results[\"courses\"][assignment - 1][\"students\"] += 1;\n            results[\"courses\"][assignment - 1][\"penalty1\"] += penalty1;\n            if (wish_rank in results[\"courses\"][assignment - 1]) {\n                results[\"courses\"][assignment - 1][wish_rank] += 1;\n            } else {\n                results[\"courses\"][assignment - 1][wish_rank] = 1;\n            }\n\n\n            if (interests_enabled) {\n                let interest = interest_matrix[i][assignment - 1];\n                let penalty2 = penalty1;\n\n                let next_penalty = 0;\n                if (wish_rank < wish_penalties.length) {\n                    next_penalty = wish_penalties[wish_rank];\n                } else {\n                    next_penalty = 2 * penalty1;\n                }\n                let coef = 0;\n                switch (interest) {\n                    case -2:\n                        coef = 1;\n                        break;\n\n                    case -1:\n                        coef = 0.66;\n                        break;\n\n                    case 1:\n                        coef = 0.33;\n                        break;\n\n                    case 2:\n                        coef = 0;\n                        break;\n\n                    default:\n                        coef = 0;\n                        console.log(\"Invalid value for wish interest !\\n\"\n                            + \"Wish interest value must be in:\\n\"\n                            + \"(very interesting : 2,\\n\"\n                            + \" interesting : 1,\\n\"\n                            + \" not really interesting : -1,\\n\"\n                            + \" not interesting at all : -2)\");\n                        break;\n                }\n                penalty2 += Math.round(coef * (next_penalty - penalty1));\n\n                results[\"penalty2\"] += penalty2;\n                results[\"students\"][i][\"penalty2\"] = penalty2;\n                results[\"students\"][i][\"interest\"] = interest;\n                results[\"courses\"][assignment - 1][\"penalty2\"] += penalty2;\n            }\n\n        }\n\n        return results;\n    }\n\n\n    /**\n     * run the munkres algorithm and does some postprocessing on the results.\n     * @param {!Array<int>} wish_penalties represent the penalties while assigning\n     *      a student to one of its wishs\n     * @param {!Array<int>} wish_min_places is the minimum number of students we\n     *      must have for each wish\n     * @param {!Array<int>} wish_max_places is the maximum number of students we\n     *      can have for each wish\n     * @param {!Array<Array<int>>} wish_matrix is a matrix, each row is a student,\n     *      each column is a course, each value is the rank of the course in the\n     *      wish list of the student. The values are in [1 ; number of courses]\n     * @param {Array<Array<int>>} interest_matrix is a matrix, each row is a\n     *      student, each column is a course, each value is the interest of the\n     *      student for the course. The values are in: {\n     *        -2 (not interesting at all);\n     *        -1 (not really interesting);\n     *         1 (interesting);\n     *         2 (very interesting)\n     *      }\n     *      This parameter is optional.\n     * @return {!Array<int>}\n     *      the index of the array is the index of the student (0 indexation)\n     *      the value is the index of the wish (the course) (1 indexation)\n     */\n    static process(\n        wish_penalties,\n        wish_min_places,\n        wish_max_places,\n        wish_matrix,\n        interest_matrix\n    ) {\n        // testing the preconditions\n        let students_number = wish_matrix.length;\n        let total_min_places = arrSum(wish_min_places);\n        let total_max_places = arrSum(wish_max_places);\n        if (students_number > total_max_places) {\n            throw Error(\"Too many students : The number of students must be lower or equal than the \"\n                + \"sum of the places.\");\n        }\n        if (students_number < total_min_places) {\n            throw Error(\"Too few students : The number of students must be greater or equal than the \"\n                + \"sum of the minimum number of students for each course.\");\n        }\n\n        let matrix;\n        if (typeof interest_matrix !== 'undefined') {\n            matrix = this.create_square_matrix(wish_matrix,\n                interest_matrix,\n                wish_penalties,\n                wish_min_places,\n                wish_max_places);\n        } else {\n            matrix = this.create_square_matrix_without_interests(wish_matrix,\n                wish_penalties,\n                wish_min_places,\n                wish_max_places);\n        }\n\n        let indices = computeMunkres(matrix);\n\n        let assignments = this.extract_assignments(indices, wish_max_places);\n        // remove the phantom students\n        assignments = assignments.slice(0, students_number);\n\n        return assignments;\n    }\n\n}\n\n\n\n/*\n ****************************** Example of use ********************************\n \n\n\n// obj = generate_random_matrix(300, 5);\n// wishs = obj[\"wish\"]\n// interests = obj[\"interest\"]\n\nwishs = [[1,2,3], [2,3,1], [3,1,2], [3,2,1]];\ninterests = [[1,-2,-2], [2,-1,2], [2,2,1], [-1,1,2]];\npenalties = [0,1,8]\nmins = [1,1,0]\nmaxs = [2,2,2]\n\nassignments = process( penalties, mins, maxs, wishs, interests );\nstats = analyze_results(assignments, penalties, mins, maxs, wishs, interests);\n    \n\nconsole.log(assignments);\nconsole.log(stats);\n\n*/\n\nexport default MunkressApp;\n","import React, {Component} from 'react';\nimport './App.css';\n\nimport Columns from '../../components/Columns/Columns';\nimport Courses from '../../components/Courses/Courses';\nimport Summary from '../../components/Summary/Summary';\nimport Affectations from '../../components/Affectations/Affectations';\nimport Statistics from '../../components/Statistics/Statistics';\nimport dataHandler from '../../services/dataHandler';\nimport reactTableUtil from '../../services/reactTableUtil';\nimport MunkresApp from '../../lib/munkrespp';\n\nimport CSVReader from 'react-csv-reader';\nimport Container from 'react-bootstrap/Container';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\nimport {Col, Row} from 'react-bootstrap';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\n\nimport fileDownload from 'js-file-download';\nimport seedRandom from 'seedrandom';\n\n// https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array\n\nfunction shuffleArray(array, seed) {\n    let rng = seedRandom(seed);\n    for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(rng() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n    }\n}\n\nfunction shuffleArray2(array1, array2, seed) {\n    if (array1.length !== array2.length) {\n        throw Error(\"array1.length !== array2.length\")\n    }\n\n    let rng = seedRandom(seed);\n\n    for (let i = array1.length - 1; i > 0; i--) {\n        const j = Math.floor(rng() * (i + 1));\n        [array1[i], array1[j]] = [array1[j], array1[i]];\n        [array2[i], array2[j]] = [array2[j], array2[i]];\n    }\n}\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            wishCount: 0,\n            columns: new Map(),\n            courses: new Map(),\n            students: [],\n            rtColumns: [{dataField: 'id', text: 'Vide'}],\n            seed: \"seed\",\n            statistics: null,\n            isAffecting: false,\n            errorShown: false,\n            errorMessage: \"\"\n        };\n    }\n\n    loadData(data, filename, meta) {\n        data = dataHandler.preProcess(data);\n        let columns = dataHandler.extractColumns(meta);\n        let wishCount = 0;\n        for (let name of columns.keys()) {\n            if (columns.get(name).state === \"wish\") {\n                wishCount++;\n            }\n        }\n\n        let courses = dataHandler.updatedCourses(new Map(), data, columns);\n        let rtColumns = reactTableUtil.columnParser(columns, courses);\n\n        this.setState({\n            wishCount: wishCount,\n            columns: columns,\n            courses: courses,\n            students: data,\n            rtColumns: rtColumns,\n            statistics: null\n        });\n    }\n\n    handleDataError(e) {\n        console.log(e);\n    }\n\n    deletedWishNum(state, key) {\n        // Not even a wish column ! Nothing to be done\n        if (state.columns.get(key).wishNum === -1) {\n            return state;\n        }\n\n        state = {...state};\n        state.column = new Map(state.column);\n\n        // Update the current wish columns count\n        state.wishCount--;\n\n        // Shift other wish columns' numbers\n        for (let el of state.columns.keys()) {\n            if (state.columns.get(el).wishNum > state.columns.get(key).wishNum)\n                state.columns.set(el, {...state.columns.get(el), wishNum: state.columns.get(el).wishNum - 1});\n        }\n\n        // Delete the column's wish number\n        state.columns.set(key, {...state.columns.get(key), wishNum: -1});\n\n        return state;\n    }\n\n    changeColumnMode(e) {\n        let value = e.target.value;\n        let key = e.target.id;\n        let state = {...this.state};\n        state.columns = new Map(state.columns);\n\n        if (value !== \"wish\") {\n            state = this.deletedWishNum(state, key);\n        } else if (state.columns.get(key).wishNum === -1) {\n            state.wishCount++;\n            state.columns.set(key, {...state.columns.get(key), wishNum: state.wishCount});\n        }\n\n        if (value !== \"appeal\") {\n            state.columns.set(key, {...state.columns.get(key), appealNum: -1});\n        }\n\n        state.columns.set(key, {...state.columns.get(key), state: value});\n        state.courses = dataHandler.updatedCourses(state.courses, state.students, state.columns);\n        state.rtColumns = reactTableUtil.columnParser(state.columns, state.courses);\n        this.setState(state);\n    }\n\n    changeColumnWishNum(e) {\n        let value = parseInt(e.target.value);\n        let key = e.target.id;\n        let state = {...this.state};\n\n        if (value === -1) {\n            state = this.deletedWishNum(state, key);\n        } else {\n            if (state.columns.get(key).wishNum === -1) {\n                state.wishCount++;\n                state.columns.set(key, {...state.columns.get(key), wishNum: state.wishCount});\n            }\n\n            for (let el of state.columns.keys()) {\n                if (state.columns.get(el).wishNum === value) {\n                    state.columns.set(el, {...state.columns.get(el), wishNum: state.columns.get(key).wishNum});\n                    break;\n                }\n            }\n        }\n\n        state.columns.set(key, {...state.columns.get(key), wishNum: value});\n        state.courses = dataHandler.updatedCourses(state.courses, state.students, state.columns);\n        state.rtColumns = reactTableUtil.columnParser(state.columns, state.courses);\n        this.setState(state);\n    }\n\n    changeColumnAppealNum(e) {\n        let value = e.target.value;\n        let key = e.target.id;\n        let state = {...this.state};\n\n        if (value !== -1) {\n            for (let el of state.columns.keys()) {\n                if (state.columns.get(el).appealNum === value) {\n                    state.columns.set(el, {...state.columns.get(el), appealNum: state.columns.get(key).appealNum});\n                    break;\n                }\n            }\n        }\n\n        state.columns.set(key, {...state.columns.get(key), appealNum: value});\n        state.courses = dataHandler.updatedCourses(state.courses, state.students, state.columns);\n        state.rtColumns = reactTableUtil.columnParser(state.columns, state.courses);\n        this.setState(state);\n    }\n\n    changePlaces(e) {\n        let name = e.target.form.id;\n        let type = e.target.name;\n        let value = e.target.value;\n\n        if (value < 0)\n            return;\n\n        let courses = new Map(this.state.courses);\n        let course = courses.get(name);\n\n        switch (type) {\n            case \"min\":\n                courses.set(name, {...course, minPlaces: Math.min(value, course.maxPlaces)});\n                break;\n            case \"max\":\n                courses.set(name, {...course,\n                                   maxPlaces: Math.max(Math.max(course.reservedPlaces + this.countManualAffectation(name), course.minPlaces), value)});\n                break;\n            case \"reserved\":\n                courses.set(name, {...course, reservedPlaces: Math.min(value, course.maxPlaces)});\n                break;\n            default:\n                throw Error(\"unexpected case\");\n        }\n\n        this.setState({courses: courses});\n    }\n\n    changeSeed(e) {\n        let name = e.target.name;\n        let value = e.target.value;\n\n        if (name === \"seed\")\n            this.setState({seed: value});\n        else if (name === \"random_seed\")\n            this.setState({seed: Math.random().toString(36).substring(2)});\n    }\n\n    getStudentsWishMatrix() {\n        let courseIds = {};\n\n        let id = 0;\n        for (let name of this.state.courses.keys()) {\n            courseIds[name] = id++;\n        }\n\n        let students = this.state.students;\n\n        let wishMatrix = [];\n        for (let studentId in students) {\n            let wishList = [];\n            wishList.studentId = studentId;\n            for (let col in students[studentId]) {\n                if (this.state.columns.get(col) !== undefined && this.state.columns.get(col).wishNum !== -1) {\n                    let limeSurveyCourseName = students[studentId][col];\n                    let limeSurveyCourseRank = this.state.columns.get(col).wishNum;\n                    let limeSurveyCourseId = courseIds[limeSurveyCourseName];\n                    wishList[limeSurveyCourseId] = limeSurveyCourseRank;\n                }\n            }\n\n            wishMatrix[studentId] = wishList;\n        }\n\n        return wishMatrix;\n    }\n\n    getStudentsInterestMatrix() {\n        let courseIds = {};\n\n        let id = 0;\n        for (let name of this.state.courses.keys()) {\n            courseIds[name] = id++;\n        }\n\n        let students = this.state.students;\n\n        let interestMatrix = [];\n        for (let studentId in students) {\n            let interestList = [];\n            interestList.studentId = studentId;\n            for (let col in students[studentId]) {\n                if (this.state.columns.get(col)!== undefined && this.state.columns.get(col).appealNum !== -1) {\n                    let limeSurveyInterest = students[studentId][col].toLowerCase();\n                    let course = this.state.columns.get(col).appealNum;\n                    let courseId = courseIds[course];\n                    let interest = 0;\n\n                    if (limeSurveyInterest.includes(\"pas du tout\")) {\n                        interest = -2;\n                    } else if (limeSurveyInterest.includes(\"peu\")) {\n                        interest = -1;\n                    } else if (limeSurveyInterest.includes(\"très\")) {\n                        interest = 2;\n                    } else {\n                        interest = 1;\n                    }\n\n                    interestList[courseId] = interest;\n                }\n            }\n\n            interestMatrix[studentId] = interestList;\n        }\n\n        return interestMatrix;\n    }\n\n    countManualAffectation(courseName) {\n        let count = 0;\n        for (let studentId in this.state.students) {\n            if (this.state.students[studentId].affectationMode === courseName)\n                count++;\n        }\n\n        return count;\n    }\n\n    getTotalManualAffectations() {\n        let count = 0;\n        for(let i = 0; i < this.state.students.length; ++i){\n            if (this.state.students[i].affectationMode !== \"Automatique\")\n                count++;\n        }\n        return count;\n    }\n\n    getTotalMinPlaces() {\n        return Array.from(this.state.courses.values()).reduce((acc, course) => acc + course.minPlaces, 0);\n    }\n\n    getAutoMinPlaces() {\n        return Array.from(this.state.courses.keys()).reduce(\n            (acc, name) => {\n                let course = this.state.courses.get(name);\n                return acc + Math.max(0, course.minPlaces - course.reservedPlaces - this.countManualAffectation(name))\n            }, 0);\n    }\n\n    getTotalMaxPlaces() {\n        return Array.from(this.state.courses.values()).reduce((acc, course) => acc + course.maxPlaces, 0);\n    }\n\n    getAutoMaxPlaces() {\n        return Array.from(this.state.courses.keys()).reduce(\n            (acc, name) => {\n                let course = this.state.courses.get(name);\n                return acc + Math.max(0, course.maxPlaces - course.reservedPlaces - this.countManualAffectation(name))\n            }, 0);\n    }\n\n    getTotalReservedPlaces() {\n        return Array.from(this.state.courses.values()).reduce((acc, course) => acc + course.reservedPlaces, 0);\n    }\n\n    getCourseUnreservedMinPlaces() {\n        let places = [];\n        let courseId = 0;\n        for (let [, course] of this.state.courses) {\n            places[courseId++] = Math.max(0, course.minPlaces - course.reservedPlaces);\n        }\n\n        return places;\n    }\n\n    getCourseUnreservedMaxPlaces() {\n        let places = [];\n        let courseId = 0;\n        for (let [, course] of this.state.courses) {\n            places[courseId++] = Math.max(0, course.maxPlaces - course.reservedPlaces);\n        }\n\n        return places;\n    }\n\n    computePenalties(size) {\n        let penalties = [];\n        for (let i = 0; i < size; i++)\n            penalties[i] = 10*i*i;\n        return penalties;\n    }\n\n    affect(useAppeal) {\n        let manualStudentCount = this.getTotalManualAffectations();\n        let autoStudentCount = this.state.students.length - manualStudentCount;\n        if (this.getAutoMinPlaces() > autoStudentCount)\n            this.showError(\"Il n'y a pas assez d'étudiants pour remplir toutes les places minimales en affectation automatique.\");\n        else if (autoStudentCount > this.getAutoMaxPlaces())\n            this.showError(\"Il n'y a pas assez de places au maximum pour tous les étudiants en affectation automatique.\");\n        else {\n            let wishCount = 0;\n            for (let name of this.state.columns.keys()) {\n                let col = this.state.columns.get(name);\n                if (col.state === \"wish\") {\n                    wishCount++;\n                    if (col.wishNum === -1) {\n                        this.showError(\"Il faut associer toutes les colonnes des voeux à l'ordre correspondant !\");\n                        return;\n                    }\n                }\n            }\n\n            if (wishCount !== this.state.courses.size) {\n                this.showError(\"Il faut autant de colonnes de vœux que de modules !\");\n                return;\n            }\n\n            if (useAppeal) {\n                let appealCount = 0;\n                for (let name of this.state.columns.keys()) {\n                    let col = this.state.columns.get(name);\n                    if (col.state === \"appeal\") {\n                        appealCount++;\n                        if (col.appealNum === -1) {\n                            this.showError(\"Il faut associer toutes les colonnes des attraits au module correspondant !\");\n                            return;\n                        }\n                    }\n                }\n\n                if (appealCount !== this.state.courses.size) {\n                    this.showError(\"Il manque les colonnes d'attrait pour certains cours !\");\n                    return;\n                }\n            }\n            let students = [...this.state.students];\n\n            // On efface les affectations précédentes\n            for (let studentId in students) {\n                students[studentId] = {...students[studentId], result: \"Calcul en cours\"};\n            }\n\n            this.setState({students: students, isAffecting: true});\n            setTimeout(() => this._affect(useAppeal), 0);\n        }\n    }\n\n    _affect(useAppeal) {\n        // wishMatrix et interestMatrix ont pour clé le studentId\n        // tandis que wishMatrixAuto et interestMatrixAuto ont pour clés des ids randomisés\n\n        let wishMatrix = this.getStudentsWishMatrix();\n        let minPlaces = this.getCourseUnreservedMinPlaces();\n        let maxPlaces = this.getCourseUnreservedMaxPlaces();\n        let penalties = this.computePenalties(this.state.courses.size);\n        let interestMatrix = undefined;\n\n        // On enlève les étudiants qui sont affectés manuellement et on mélange la matrice\n        let wishMatrixAuto = wishMatrix.filter(listMatrix => this.state.students[listMatrix.studentId].affectationMode === \"Automatique\");\n        let interestMatrixAuto = undefined;\n        if (useAppeal) {\n            interestMatrix = this.getStudentsInterestMatrix();\n            interestMatrixAuto = interestMatrix.filter(listMatrix => this.state.students[listMatrix.studentId].affectationMode === \"Automatique\");\n            shuffleArray2(wishMatrixAuto, interestMatrixAuto, this.state.seed);\n        } else {\n            shuffleArray(wishMatrixAuto, this.state.seed);\n        }\n\n        let courseNames = Array.from(this.state.courses.keys());\n\n        // On décompte les étudiants qui sont affectés manuellement\n        let autoMinPlaces = courseNames.map((courseName, index) => Math.max(0, minPlaces[index] - this.countManualAffectation(courseName)));\n        let autoMaxPlaces = courseNames.map((courseName, index) => Math.max(0, maxPlaces[index] - this.countManualAffectation(courseName)));\n\n        let assignmentsAuto = undefined;\n\n        try {\n            // On lance l'algorithme sur tous ceux qui doivent être affectés automatiquement\n            assignmentsAuto = MunkresApp.process(penalties, autoMinPlaces, autoMaxPlaces, wishMatrixAuto, interestMatrixAuto);\n        } catch (e) {\n            // S'il y a une erreur\n            let students = [...this.state.students];\n\n            // On efface le calcul en cours\n            for (let studentId in students) {\n                students[studentId] = {...students[studentId], result: \"Erreur d'affectation\"};\n            }\n\n            this.setState({students: students, isAffecting: false});\n            this.showError(e.message);\n            return;\n        }\n\n        let assignments = [];\n        let students = [...this.state.students];\n\n        // On écrit le résultat des affectations automatiques en retrouvant le studentId original\n        for (let id in assignmentsAuto) {\n            let studentId = wishMatrixAuto[id].studentId;\n            assignments[studentId] = assignmentsAuto[id];\n            students[studentId] = {...students[studentId], result: courseNames[assignmentsAuto[id]-1]};\n        }\n\n        // On fait les affectations manuelles\n        for (let studentId in students) {\n            if (students[studentId].affectationMode !== \"Automatique\")\n            {\n                assignments[studentId] = courseNames.indexOf(students[studentId].affectationMode)+1;\n                students[studentId] = {...students[studentId], result: students[studentId].affectationMode};\n            }\n        }\n\n        let statistics = MunkresApp.analyze_results(assignments, penalties, minPlaces, maxPlaces, wishMatrix, interestMatrix);\n\n        this.setState({\n            students: students,\n            statistics: statistics,\n            isAffecting: false\n        });\n    }\n\n    loadState(e) {\n        let reader = new FileReader();\n        reader.onload = e => {\n            let state = JSON.parse(e.target.result);\n            state.columns = new Map(state.columns);\n            state.courses = new Map(state.courses);\n            this.setState(state);\n        };\n        reader.readAsText(e.target.files[0]);\n    }\n\n    saveState() {\n        let state = {...this.state};\n        state[\"columns\"] = [...state[\"columns\"]];\n        state[\"courses\"] = [...state[\"courses\"]];\n        let data = JSON.stringify(state);\n        fileDownload(data, 'state.json');\n    }\n\n    showError(message) {\n        this.setState({errorShown: true, errorMessage: message});\n    }\n\n    hideError() {\n        this.setState({errorShown: false});\n    }\n\n    editRow(row) {\n        let students = [...this.state.students];\n        students[row.id] = row;\n        if (row.affectationMode !== \"Automatique\") {\n            let courseName = row.affectationMode;\n            let course = this.state.courses.get(courseName);\n            let count = course.reservedPlaces;\n            for (let studentId in students) {\n                if (this.state.students[studentId].affectationMode === courseName)\n                    count++;\n            }\n\n            if (course.maxPlaces < count) {\n                this.showError(\"Il n'y a pas assez de place dans le cours « \" + courseName + \" » pour cette affectation manuelle.\\n\" +\n                    \"Une place a donc été rajoutée automatiquement.\");\n\n                let courses = new Map(this.state.courses);\n                courses.set(courseName, {...course, maxPlaces: count});\n                this.setState({courses: courses});\n            }\n\n        }\n\n        this.setState({students: students});\n    }\n\n    render() {\n        return (\n            <>\n\n                <Container fluid={true}>\n                    <Jumbotron>\n                        <input type=\"file\" id=\"file\" ref=\"loadStateInput\" style={{display: \"none\"}} onChange={e => this.loadState(e)} />\n                        <Button className=\"btn-primary float-right\"\n                                onClick={() => this.saveState()}\n                                disabled={this.state.isAffecting}>\n                            Enregistrer\n                        </Button>\n                        <Button className=\"btn-primary float-right mr-2\"\n                                onClick={() => this.refs.loadStateInput.click()}\n                                disabled={this.state.isAffecting}>\n                            Charger\n                        </Button>\n\n                        <h1>Ventilation</h1>\n                        <hr/>\n                        <CSVReader\n                            cssClass=\"csv-reader-input\"\n                            label={<span className=\"mr-1\">Fichier CSV à charger : </span>}\n                            onFileLoaded={this.loadData.bind(this)}\n                            onError={this.handleDataError}\n                            parserOptions={{header: true,\n                                            skipEmptyLines: true,\n                                            transformHeader: dataHandler.sanitizeColumnName}}\n                            inputId=\"limeSurvey\"\n                            disabled={this.state.isAffecting}\n                        />\n                    </Jumbotron>\n\n                    {this.state.students.length !== 0 &&\n                        <>\n                            <Row>\n                                <Col sm=\"8\">\n                                    <Columns wishCount={this.state.wishCount}\n                                             courses={this.state.courses}\n                                             columns={this.state.columns}\n                                             changeMode={this.changeColumnMode.bind(this)}\n                                             changeWishNum={this.changeColumnWishNum.bind(this)}\n                                             changeAppealNum={this.changeColumnAppealNum.bind(this)}/>\n                                </Col>\n                                <Col sm=\"4\">\n                                    <Courses courses={this.state.courses}\n                                             changePlaces={this.changePlaces.bind(this)}/>\n                                </Col>\n                            </Row>\n                            <hr/>\n                            <Row>\n                                <Col sm=\"8\">\n                                    <Summary studentCount={this.state.students.length}\n                                             minPlaces={this.getTotalMinPlaces()}\n                                             maxPlaces={this.getTotalMaxPlaces()}\n                                             reservedPlaces={this.getTotalReservedPlaces()}\n                                             autoMinPlaces={this.getAutoMinPlaces()}\n                                             autoMaxPlaces={this.getAutoMaxPlaces()}\n                                             manualStudentCount={this.getTotalManualAffectations()}/>\n                                </Col>\n                            </Row>\n                            <hr/>\n                            <Affectations students={this.state.students}\n                                          rtColumns={this.state.rtColumns}\n                                          isAffecting={this.state.isAffecting}\n                                          seed={this.state.seed}\n                                          affect={this.affect.bind(this)}\n                                          changeSeed={this.changeSeed.bind(this)}\n                                          editRow={this.editRow.bind(this)}/>\n                            {\n                                this.state.statistics &&\n                                <>\n                                    <hr/>\n                                    <Statistics statistics={this.state.statistics}\n                                                courses={this.state.courses}/>\n                                </>\n                            }\n                        </>\n                    }\n                </Container>\n\n                <Modal show={this.state.errorShown} onHide={this.hideError.bind(this)}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Une erreur est survenue...</Modal.Title>\n                    </Modal.Header>\n\n                    <Modal.Body>\n                        <p>{this.state.errorMessage}</p>\n                    </Modal.Body>\n\n                    <Modal.Footer>\n                        <Button variant=\"primary\" onClick={this.hideError.bind(this)}>Fermer</Button>\n                    </Modal.Footer>\n                </Modal>\n\n            </>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './containers/App/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = function (e) {\n  var t = {};\n\n  function r(i) {\n    if (t[i]) return t[i].exports;\n    var n = t[i] = {\n      i: i,\n      l: !1,\n      exports: {}\n    };\n    return e[i].call(n.exports, n, n.exports, r), n.l = !0, n.exports;\n  }\n\n  return r.m = e, r.c = t, r.d = function (e, t, i) {\n    r.o(e, t) || Object.defineProperty(e, t, {\n      enumerable: !0,\n      get: i\n    });\n  }, r.r = function (e) {\n    \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n      value: \"Module\"\n    }), Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n  }, r.t = function (e, t) {\n    if (1 & t && (e = r(e)), 8 & t) return e;\n    if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n    var i = Object.create(null);\n    if (r.r(i), Object.defineProperty(i, \"default\", {\n      enumerable: !0,\n      value: e\n    }), 2 & t && \"string\" != typeof e) for (var n in e) {\n      r.d(i, n, function (t) {\n        return e[t];\n      }.bind(null, n));\n    }\n    return i;\n  }, r.n = function (e) {\n    var t = e && e.__esModule ? function () {\n      return e.default;\n    } : function () {\n      return e;\n    };\n    return r.d(t, \"a\", t), t;\n  }, r.o = function (e, t) {\n    return Object.prototype.hasOwnProperty.call(e, t);\n  }, r.p = \"\", r(r.s = 2);\n}([function (e, t) {\n  e.exports = require(\"prop-types\");\n}, function (e, t) {\n  e.exports = require(\"react\");\n}, function (e, t, r) {\n  \"use strict\";\n\n  r.r(t);\n\n  var i = r(1),\n      n = r.n(i),\n      s = r(0),\n      a = r(3),\n      o = function o(e) {\n    var t = e.accept,\n        r = void 0 === t ? \".csv, text/csv\" : t,\n        i = e.cssClass,\n        s = void 0 === i ? \"csv-reader-input\" : i,\n        o = e.cssInputClass,\n        u = void 0 === o ? \"csv-input\" : o,\n        h = e.label,\n        f = e.onFileLoaded,\n        l = e.onError,\n        d = e.inputId,\n        c = void 0 === d ? null : d,\n        p = e.inputStyle,\n        m = void 0 === p ? {} : p,\n        g = e.fileEncoding,\n        _ = void 0 === g ? \"UTF-8\" : g,\n        v = e.parserOptions,\n        y = void 0 === v ? {} : v;\n\n    return n.a.createElement(\"div\", {\n      className: s\n    }, h && n.a.createElement(\"label\", {\n      htmlFor: c\n    }, h), n.a.createElement(\"input\", {\n      className: u,\n      type: \"file\",\n      id: c,\n      style: m,\n      accept: r,\n      onChange: function onChange(e) {\n        return function (e) {\n          var t = new FileReader();\n\n          if (e.target.files.length > 0) {\n            var r = e.target.files[0].name;\n            t.onload = function (e) {\n              var t = a.parse(e.target.result, Object.assign(y, {\n                error: l,\n                encoding: _\n              }));\n              f(t.data, r, t.meta);\n            }, t.readAsText(e.target.files[0], _);\n          }\n        }(e);\n      }\n    }));\n  };\n\n  o.propTypes = {\n    cssClass: s.string,\n    cssInputClass: s.string,\n    label: Object(s.oneOfType)([s.string, s.element]),\n    onFileLoaded: s.func.isRequired,\n    onError: s.func,\n    inputId: s.string\n  }, t.default = o;\n}, function (e, t, r) {\n  var i, n, s;\n  /* @license\n  Papa Parse\n  v5.0.2\n  https://github.com/mholt/PapaParse\n  License: MIT\n  */\n\n  n = [], void 0 === (s = \"function\" == typeof (i = function e() {\n    \"use strict\";\n\n    var t = \"undefined\" != typeof self ? self : \"undefined\" != typeof window ? window : void 0 !== t ? t : {},\n        r = !t.document && !!t.postMessage,\n        i = r && /blob:/i.test((t.location || {}).protocol),\n        n = {},\n        s = 0,\n        a = {\n      parse: function parse(r, i) {\n        var o = (i = i || {}).dynamicTyping || !1;\n\n        if (b(o) && (i.dynamicTypingFunction = o, o = {}), i.dynamicTyping = o, i.transform = !!b(i.transform) && i.transform, i.worker && a.WORKERS_SUPPORTED) {\n          var u = function () {\n            if (!a.WORKERS_SUPPORTED) return !1;\n            var r,\n                i,\n                o = (r = t.URL || t.webkitURL || null, i = e.toString(), a.BLOB_URL || (a.BLOB_URL = r.createObjectURL(new Blob([\"(\", i, \")();\"], {\n              type: \"text/javascript\"\n            })))),\n                u = new t.Worker(o);\n            return u.onmessage = g, u.id = s++, n[u.id] = u;\n          }();\n\n          return u.userStep = i.step, u.userChunk = i.chunk, u.userComplete = i.complete, u.userError = i.error, i.step = b(i.step), i.chunk = b(i.chunk), i.complete = b(i.complete), i.error = b(i.error), delete i.worker, void u.postMessage({\n            input: r,\n            config: i,\n            workerId: u.id\n          });\n        }\n\n        var c = null;\n        return a.NODE_STREAM_INPUT, \"string\" == typeof r ? c = i.download ? new h(i) : new l(i) : !0 === r.readable && b(r.read) && b(r.on) ? c = new d(i) : (t.File && r instanceof File || r instanceof Object) && (c = new f(i)), c.stream(r);\n      },\n      unparse: function unparse(e, t) {\n        var r = !1,\n            i = !0,\n            n = \",\",\n            s = \"\\r\\n\",\n            o = '\"',\n            u = o + o,\n            h = !1,\n            f = null;\n        !function () {\n          if (\"object\" == typeof t) {\n            if (\"string\" != typeof t.delimiter || a.BAD_DELIMITERS.filter(function (e) {\n              return -1 !== t.delimiter.indexOf(e);\n            }).length || (n = t.delimiter), (\"boolean\" == typeof t.quotes || Array.isArray(t.quotes)) && (r = t.quotes), \"boolean\" != typeof t.skipEmptyLines && \"string\" != typeof t.skipEmptyLines || (h = t.skipEmptyLines), \"string\" == typeof t.newline && (s = t.newline), \"string\" == typeof t.quoteChar && (o = t.quoteChar), \"boolean\" == typeof t.header && (i = t.header), Array.isArray(t.columns)) {\n              if (0 === t.columns.length) throw new Error(\"Option columns is empty\");\n              f = t.columns;\n            }\n\n            void 0 !== t.escapeChar && (u = t.escapeChar + o);\n          }\n        }();\n        var l = new RegExp(p(o), \"g\");\n\n        if (\"string\" == typeof e && (e = JSON.parse(e)), Array.isArray(e)) {\n          if (!e.length || Array.isArray(e[0])) return c(null, e, h);\n          if (\"object\" == typeof e[0]) return c(f || d(e[0]), e, h);\n        } else if (\"object\" == typeof e) return \"string\" == typeof e.data && (e.data = JSON.parse(e.data)), Array.isArray(e.data) && (e.fields || (e.fields = e.meta && e.meta.fields), e.fields || (e.fields = Array.isArray(e.data[0]) ? e.fields : d(e.data[0])), Array.isArray(e.data[0]) || \"object\" == typeof e.data[0] || (e.data = [e.data])), c(e.fields || [], e.data || [], h);\n\n        throw new Error(\"Unable to serialize unrecognized input\");\n\n        function d(e) {\n          if (\"object\" != typeof e) return [];\n          var t = [];\n\n          for (var r in e) {\n            t.push(r);\n          }\n\n          return t;\n        }\n\n        function c(e, t, r) {\n          var a = \"\";\n          \"string\" == typeof e && (e = JSON.parse(e)), \"string\" == typeof t && (t = JSON.parse(t));\n          var o = Array.isArray(e) && 0 < e.length,\n              u = !Array.isArray(t[0]);\n\n          if (o && i) {\n            for (var h = 0; h < e.length; h++) {\n              0 < h && (a += n), a += m(e[h], h);\n            }\n\n            0 < t.length && (a += s);\n          }\n\n          for (var f = 0; f < t.length; f++) {\n            var l = o ? e.length : t[f].length,\n                d = !1,\n                c = o ? 0 === Object.keys(t[f]).length : 0 === t[f].length;\n\n            if (r && !o && (d = \"greedy\" === r ? \"\" === t[f].join(\"\").trim() : 1 === t[f].length && 0 === t[f][0].length), \"greedy\" === r && o) {\n              for (var p = [], g = 0; g < l; g++) {\n                var _ = u ? e[g] : g;\n\n                p.push(t[f][_]);\n              }\n\n              d = \"\" === p.join(\"\").trim();\n            }\n\n            if (!d) {\n              for (var v = 0; v < l; v++) {\n                0 < v && !c && (a += n);\n                var y = o && u ? e[v] : v;\n                a += m(t[f][y], v);\n              }\n\n              f < t.length - 1 && (!r || 0 < l && !c) && (a += s);\n            }\n          }\n\n          return a;\n        }\n\n        function m(e, t) {\n          return null == e ? \"\" : e.constructor === Date ? JSON.stringify(e).slice(1, 25) : (e = e.toString().replace(l, u), \"boolean\" == typeof r && r || Array.isArray(r) && r[t] || function (e, t) {\n            for (var r = 0; r < t.length; r++) {\n              if (-1 < e.indexOf(t[r])) return !0;\n            }\n\n            return !1;\n          }(e, a.BAD_DELIMITERS) || -1 < e.indexOf(n) || \" \" === e.charAt(0) || \" \" === e.charAt(e.length - 1) ? o + e + o : e);\n        }\n      }\n    };\n\n    if (a.RECORD_SEP = String.fromCharCode(30), a.UNIT_SEP = String.fromCharCode(31), a.BYTE_ORDER_MARK = \"\\uFEFF\", a.BAD_DELIMITERS = [\"\\r\", \"\\n\", '\"', a.BYTE_ORDER_MARK], a.WORKERS_SUPPORTED = !r && !!t.Worker, a.NODE_STREAM_INPUT = 1, a.LocalChunkSize = 10485760, a.RemoteChunkSize = 5242880, a.DefaultDelimiter = \",\", a.Parser = m, a.ParserHandle = c, a.NetworkStreamer = h, a.FileStreamer = f, a.StringStreamer = l, a.ReadableStreamStreamer = d, t.jQuery) {\n      var o = t.jQuery;\n\n      o.fn.parse = function (e) {\n        var r = e.config || {},\n            i = [];\n        return this.each(function (e) {\n          if (\"INPUT\" !== o(this).prop(\"tagName\").toUpperCase() || \"file\" !== o(this).attr(\"type\").toLowerCase() || !t.FileReader || !this.files || 0 === this.files.length) return !0;\n\n          for (var n = 0; n < this.files.length; n++) {\n            i.push({\n              file: this.files[n],\n              inputElem: this,\n              instanceConfig: o.extend({}, r)\n            });\n          }\n        }), n(), this;\n\n        function n() {\n          if (0 !== i.length) {\n            var t,\n                r,\n                n,\n                u = i[0];\n\n            if (b(e.before)) {\n              var h = e.before(u.file, u.inputElem);\n\n              if (\"object\" == typeof h) {\n                if (\"abort\" === h.action) return t = u.file, r = u.inputElem, n = h.reason, void (b(e.error) && e.error({\n                  name: \"AbortError\"\n                }, t, r, n));\n                if (\"skip\" === h.action) return void s();\n                \"object\" == typeof h.config && (u.instanceConfig = o.extend(u.instanceConfig, h.config));\n              } else if (\"skip\" === h) return void s();\n            }\n\n            var f = u.instanceConfig.complete;\n            u.instanceConfig.complete = function (e) {\n              b(f) && f(e, u.file, u.inputElem), s();\n            }, a.parse(u.file, u.instanceConfig);\n          } else b(e.complete) && e.complete();\n        }\n\n        function s() {\n          i.splice(0, 1), n();\n        }\n      };\n    }\n\n    function u(e) {\n      this._handle = null, this._finished = !1, this._completed = !1, this._halted = !1, this._input = null, this._baseIndex = 0, this._partialLine = \"\", this._rowCount = 0, this._start = 0, this._nextChunk = null, this.isFirstChunk = !0, this._completeResults = {\n        data: [],\n        errors: [],\n        meta: {}\n      }, function (e) {\n        var t = y(e);\n        t.chunkSize = parseInt(t.chunkSize), e.step || e.chunk || (t.chunkSize = null), this._handle = new c(t), (this._handle.streamer = this)._config = t;\n      }.call(this, e), this.parseChunk = function (e, r) {\n        if (this.isFirstChunk && b(this._config.beforeFirstChunk)) {\n          var n = this._config.beforeFirstChunk(e);\n\n          void 0 !== n && (e = n);\n        }\n\n        this.isFirstChunk = !1, this._halted = !1;\n        var s = this._partialLine + e;\n        this._partialLine = \"\";\n\n        var o = this._handle.parse(s, this._baseIndex, !this._finished);\n\n        if (!this._handle.paused() && !this._handle.aborted()) {\n          var u = o.meta.cursor;\n          this._finished || (this._partialLine = s.substring(u - this._baseIndex), this._baseIndex = u), o && o.data && (this._rowCount += o.data.length);\n          var h = this._finished || this._config.preview && this._rowCount >= this._config.preview;\n          if (i) t.postMessage({\n            results: o,\n            workerId: a.WORKER_ID,\n            finished: h\n          });else if (b(this._config.chunk) && !r) {\n            if (this._config.chunk(o, this._handle), this._handle.paused() || this._handle.aborted()) return void (this._halted = !0);\n            o = void 0, this._completeResults = void 0;\n          }\n          return this._config.step || this._config.chunk || (this._completeResults.data = this._completeResults.data.concat(o.data), this._completeResults.errors = this._completeResults.errors.concat(o.errors), this._completeResults.meta = o.meta), this._completed || !h || !b(this._config.complete) || o && o.meta.aborted || (this._config.complete(this._completeResults, this._input), this._completed = !0), h || o && o.meta.paused || this._nextChunk(), o;\n        }\n\n        this._halted = !0;\n      }, this._sendError = function (e) {\n        b(this._config.error) ? this._config.error(e) : i && this._config.error && t.postMessage({\n          workerId: a.WORKER_ID,\n          error: e,\n          finished: !1\n        });\n      };\n    }\n\n    function h(e) {\n      var t;\n      (e = e || {}).chunkSize || (e.chunkSize = a.RemoteChunkSize), u.call(this, e), this._nextChunk = r ? function () {\n        this._readChunk(), this._chunkLoaded();\n      } : function () {\n        this._readChunk();\n      }, this.stream = function (e) {\n        this._input = e, this._nextChunk();\n      }, this._readChunk = function () {\n        if (this._finished) this._chunkLoaded();else {\n          if (t = new XMLHttpRequest(), this._config.withCredentials && (t.withCredentials = this._config.withCredentials), r || (t.onload = k(this._chunkLoaded, this), t.onerror = k(this._chunkError, this)), t.open(\"GET\", this._input, !r), this._config.downloadRequestHeaders) {\n            var e = this._config.downloadRequestHeaders;\n\n            for (var i in e) {\n              t.setRequestHeader(i, e[i]);\n            }\n          }\n\n          if (this._config.chunkSize) {\n            var n = this._start + this._config.chunkSize - 1;\n            t.setRequestHeader(\"Range\", \"bytes=\" + this._start + \"-\" + n);\n          }\n\n          try {\n            t.send();\n          } catch (e) {\n            this._chunkError(e.message);\n          }\n\n          r && 0 === t.status ? this._chunkError() : this._start += this._config.chunkSize;\n        }\n      }, this._chunkLoaded = function () {\n        var e;\n        4 === t.readyState && (t.status < 200 || 400 <= t.status ? this._chunkError() : (this._finished = !this._config.chunkSize || this._start > (null === (e = t.getResponseHeader(\"Content-Range\")) ? -1 : parseInt(e.substr(e.lastIndexOf(\"/\") + 1))), this.parseChunk(t.responseText)));\n      }, this._chunkError = function (e) {\n        var r = t.statusText || e;\n\n        this._sendError(new Error(r));\n      };\n    }\n\n    function f(e) {\n      var t, r;\n      (e = e || {}).chunkSize || (e.chunkSize = a.LocalChunkSize), u.call(this, e);\n      var i = \"undefined\" != typeof FileReader;\n      this.stream = function (e) {\n        this._input = e, r = e.slice || e.webkitSlice || e.mozSlice, i ? ((t = new FileReader()).onload = k(this._chunkLoaded, this), t.onerror = k(this._chunkError, this)) : t = new FileReaderSync(), this._nextChunk();\n      }, this._nextChunk = function () {\n        this._finished || this._config.preview && !(this._rowCount < this._config.preview) || this._readChunk();\n      }, this._readChunk = function () {\n        var e = this._input;\n\n        if (this._config.chunkSize) {\n          var n = Math.min(this._start + this._config.chunkSize, this._input.size);\n          e = r.call(e, this._start, n);\n        }\n\n        var s = t.readAsText(e, this._config.encoding);\n        i || this._chunkLoaded({\n          target: {\n            result: s\n          }\n        });\n      }, this._chunkLoaded = function (e) {\n        this._start += this._config.chunkSize, this._finished = !this._config.chunkSize || this._start >= this._input.size, this.parseChunk(e.target.result);\n      }, this._chunkError = function () {\n        this._sendError(t.error);\n      };\n    }\n\n    function l(e) {\n      var t;\n      u.call(this, e = e || {}), this.stream = function (e) {\n        return t = e, this._nextChunk();\n      }, this._nextChunk = function () {\n        if (!this._finished) {\n          var e = this._config.chunkSize,\n              r = e ? t.substr(0, e) : t;\n          return t = e ? t.substr(e) : \"\", this._finished = !t, this.parseChunk(r);\n        }\n      };\n    }\n\n    function d(e) {\n      u.call(this, e = e || {});\n      var t = [],\n          r = !0,\n          i = !1;\n      this.pause = function () {\n        u.prototype.pause.apply(this, arguments), this._input.pause();\n      }, this.resume = function () {\n        u.prototype.resume.apply(this, arguments), this._input.resume();\n      }, this.stream = function (e) {\n        this._input = e, this._input.on(\"data\", this._streamData), this._input.on(\"end\", this._streamEnd), this._input.on(\"error\", this._streamError);\n      }, this._checkIsFinished = function () {\n        i && 1 === t.length && (this._finished = !0);\n      }, this._nextChunk = function () {\n        this._checkIsFinished(), t.length ? this.parseChunk(t.shift()) : r = !0;\n      }, this._streamData = k(function (e) {\n        try {\n          t.push(\"string\" == typeof e ? e : e.toString(this._config.encoding)), r && (r = !1, this._checkIsFinished(), this.parseChunk(t.shift()));\n        } catch (e) {\n          this._streamError(e);\n        }\n      }, this), this._streamError = k(function (e) {\n        this._streamCleanUp(), this._sendError(e);\n      }, this), this._streamEnd = k(function () {\n        this._streamCleanUp(), i = !0, this._streamData(\"\");\n      }, this), this._streamCleanUp = k(function () {\n        this._input.removeListener(\"data\", this._streamData), this._input.removeListener(\"end\", this._streamEnd), this._input.removeListener(\"error\", this._streamError);\n      }, this);\n    }\n\n    function c(e) {\n      var t,\n          r,\n          i,\n          n = Math.pow(2, 53),\n          s = -n,\n          o = /^\\s*-?(\\d*\\.?\\d+|\\d+\\.?\\d*)(e[-+]?\\d+)?\\s*$/i,\n          u = /(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))/,\n          h = this,\n          f = 0,\n          l = 0,\n          d = !1,\n          c = !1,\n          g = [],\n          _ = {\n        data: [],\n        errors: [],\n        meta: {}\n      };\n\n      if (b(e.step)) {\n        var v = e.step;\n\n        e.step = function (t) {\n          if (_ = t, w()) E();else {\n            if (E(), 0 === _.data.length) return;\n            f += t.data.length, e.preview && f > e.preview ? r.abort() : v(_, h);\n          }\n        };\n      }\n\n      function k(t) {\n        return \"greedy\" === e.skipEmptyLines ? \"\" === t.join(\"\").trim() : 1 === t.length && 0 === t[0].length;\n      }\n\n      function E() {\n        if (_ && i && (R(\"Delimiter\", \"UndetectableDelimiter\", \"Unable to auto-detect delimiting character; defaulted to '\" + a.DefaultDelimiter + \"'\"), i = !1), e.skipEmptyLines) for (var t = 0; t < _.data.length; t++) {\n          k(_.data[t]) && _.data.splice(t--, 1);\n        }\n        return w() && function () {\n          if (_) if (Array.isArray(_.data[0])) {\n            for (var t = 0; w() && t < _.data.length; t++) {\n              _.data[t].forEach(r);\n            }\n\n            _.data.splice(0, 1);\n          } else _.data.forEach(r);\n\n          function r(t) {\n            b(e.transformHeader) && (t = e.transformHeader(t)), g.push(t);\n          }\n        }(), function () {\n          if (!_ || !e.header && !e.dynamicTyping && !e.transform) return _;\n\n          function t(t, r) {\n            var i,\n                n = e.header ? {} : [];\n\n            for (i = 0; i < t.length; i++) {\n              var s = i,\n                  a = t[i];\n              e.header && (s = i >= g.length ? \"__parsed_extra\" : g[i]), e.transform && (a = e.transform(a, s)), a = C(s, a), \"__parsed_extra\" === s ? (n[s] = n[s] || [], n[s].push(a)) : n[s] = a;\n            }\n\n            return e.header && (i > g.length ? R(\"FieldMismatch\", \"TooManyFields\", \"Too many fields: expected \" + g.length + \" fields but parsed \" + i, l + r) : i < g.length && R(\"FieldMismatch\", \"TooFewFields\", \"Too few fields: expected \" + g.length + \" fields but parsed \" + i, l + r)), n;\n          }\n\n          var r = 1;\n          return !_.data[0] || Array.isArray(_.data[0]) ? (_.data = _.data.map(t), r = _.data.length) : _.data = t(_.data, 0), e.header && _.meta && (_.meta.fields = g), l += r, _;\n        }();\n      }\n\n      function w() {\n        return e.header && 0 === g.length;\n      }\n\n      function C(t, r) {\n        return i = t, e.dynamicTypingFunction && void 0 === e.dynamicTyping[i] && (e.dynamicTyping[i] = e.dynamicTypingFunction(i)), !0 === (e.dynamicTyping[i] || e.dynamicTyping) ? \"true\" === r || \"TRUE\" === r || \"false\" !== r && \"FALSE\" !== r && (function (e) {\n          if (o.test(e)) {\n            var t = parseFloat(e);\n            if (s < t && t < n) return !0;\n          }\n\n          return !1;\n        }(r) ? parseFloat(r) : u.test(r) ? new Date(r) : \"\" === r ? null : r) : r;\n        var i;\n      }\n\n      function R(e, t, r, i) {\n        _.errors.push({\n          type: e,\n          code: t,\n          message: r,\n          row: i\n        });\n      }\n\n      this.parse = function (n, s, o) {\n        var u = e.quoteChar || '\"';\n        if (e.newline || (e.newline = function (e, t) {\n          e = e.substr(0, 1048576);\n          var r = new RegExp(p(t) + \"([^]*?)\" + p(t), \"gm\"),\n              i = (e = e.replace(r, \"\")).split(\"\\r\"),\n              n = e.split(\"\\n\"),\n              s = 1 < n.length && n[0].length < i[0].length;\n          if (1 === i.length || s) return \"\\n\";\n\n          for (var a = 0, o = 0; o < i.length; o++) {\n            \"\\n\" === i[o][0] && a++;\n          }\n\n          return a >= i.length / 2 ? \"\\r\\n\" : \"\\r\";\n        }(n, u)), i = !1, e.delimiter) b(e.delimiter) && (e.delimiter = e.delimiter(n), _.meta.delimiter = e.delimiter);else {\n          var h = function (t, r, i, n, s) {\n            var o, u, h, f;\n            s = s || [\",\", \"\\t\", \"|\", \";\", a.RECORD_SEP, a.UNIT_SEP];\n\n            for (var l = 0; l < s.length; l++) {\n              var d = s[l],\n                  c = 0,\n                  p = 0,\n                  g = 0;\n              h = void 0;\n\n              for (var _ = new m({\n                comments: n,\n                delimiter: d,\n                newline: r,\n                preview: 10\n              }).parse(t), v = 0; v < _.data.length; v++) {\n                if (i && k(_.data[v])) g++;else {\n                  var y = _.data[v].length;\n                  p += y, void 0 !== h ? 0 < y && (c += Math.abs(y - h), h = y) : h = y;\n                }\n              }\n\n              0 < _.data.length && (p /= _.data.length - g), (void 0 === u || c <= u) && (void 0 === f || f < p) && 1.99 < p && (u = c, o = d, f = p);\n            }\n\n            return {\n              successful: !!(e.delimiter = o),\n              bestDelimiter: o\n            };\n          }(n, e.newline, e.skipEmptyLines, e.comments, e.delimitersToGuess);\n\n          h.successful ? e.delimiter = h.bestDelimiter : (i = !0, e.delimiter = a.DefaultDelimiter), _.meta.delimiter = e.delimiter;\n        }\n        var f = y(e);\n        return e.preview && e.header && f.preview++, t = n, r = new m(f), _ = r.parse(t, s, o), E(), d ? {\n          meta: {\n            paused: !0\n          }\n        } : _ || {\n          meta: {\n            paused: !1\n          }\n        };\n      }, this.paused = function () {\n        return d;\n      }, this.pause = function () {\n        d = !0, r.abort(), t = t.substr(r.getCharIndex());\n      }, this.resume = function () {\n        h.streamer._halted ? (d = !1, h.streamer.parseChunk(t, !0)) : setTimeout(this.resume, 3);\n      }, this.aborted = function () {\n        return c;\n      }, this.abort = function () {\n        c = !0, r.abort(), _.meta.aborted = !0, b(e.complete) && e.complete(_), t = \"\";\n      };\n    }\n\n    function p(e) {\n      return e.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n    }\n\n    function m(e) {\n      var t,\n          r = (e = e || {}).delimiter,\n          i = e.newline,\n          n = e.comments,\n          s = e.step,\n          o = e.preview,\n          u = e.fastMode,\n          h = t = void 0 === e.quoteChar ? '\"' : e.quoteChar;\n      if (void 0 !== e.escapeChar && (h = e.escapeChar), (\"string\" != typeof r || -1 < a.BAD_DELIMITERS.indexOf(r)) && (r = \",\"), n === r) throw new Error(\"Comment character same as delimiter\");\n      !0 === n ? n = \"#\" : (\"string\" != typeof n || -1 < a.BAD_DELIMITERS.indexOf(n)) && (n = !1), \"\\n\" !== i && \"\\r\" !== i && \"\\r\\n\" !== i && (i = \"\\n\");\n      var f = 0,\n          l = !1;\n      this.parse = function (e, a, d) {\n        if (\"string\" != typeof e) throw new Error(\"Input must be a string\");\n        var c = e.length,\n            m = r.length,\n            g = i.length,\n            _ = n.length,\n            v = b(s),\n            y = [],\n            k = [],\n            E = [],\n            w = f = 0;\n        if (!e) return z();\n\n        if (u || !1 !== u && -1 === e.indexOf(t)) {\n          for (var C = e.split(i), R = 0; R < C.length; R++) {\n            if (E = C[R], f += E.length, R !== C.length - 1) f += i.length;else if (d) return z();\n\n            if (!n || E.substr(0, _) !== n) {\n              if (v) {\n                if (y = [], L(E.split(r)), U(), l) return z();\n              } else L(E.split(r));\n\n              if (o && o <= R) return y = y.slice(0, o), z(!0);\n            }\n          }\n\n          return z();\n        }\n\n        for (var S = e.indexOf(r, f), x = e.indexOf(i, f), O = new RegExp(p(h) + p(t), \"g\"), I = e.indexOf(t, f);;) {\n          if (e[f] !== t) {\n            if (n && 0 === E.length && e.substr(f, _) === n) {\n              if (-1 === x) return z();\n              f = x + g, x = e.indexOf(i, f), S = e.indexOf(r, f);\n            } else {\n              if (-1 !== S && (S < x || -1 === x)) {\n                if (-1 === I) {\n                  E.push(e.substring(f, S)), f = S + m, S = e.indexOf(r, f);\n                  continue;\n                }\n\n                var T = q(S, I, x);\n\n                if (T && void 0 !== T.nextDelim) {\n                  S = T.nextDelim, I = T.quoteSearch, E.push(e.substring(f, S)), f = S + m, S = e.indexOf(r, f);\n                  continue;\n                }\n              }\n\n              if (-1 === x) break;\n              if (E.push(e.substring(f, x)), M(x + g), v && (U(), l)) return z();\n              if (o && y.length >= o) return z(!0);\n            }\n          } else for (I = f, f++;;) {\n            if (-1 === (I = e.indexOf(t, I + 1))) return d || k.push({\n              type: \"Quotes\",\n              code: \"MissingQuotes\",\n              message: \"Quoted field unterminated\",\n              row: y.length,\n              index: f\n            }), j();\n            if (I === c - 1) return j(e.substring(f, I).replace(O, t));\n\n            if (t !== h || e[I + 1] !== h) {\n              if (t === h || 0 === I || e[I - 1] !== h) {\n                var D = F(-1 === x ? S : Math.min(S, x));\n\n                if (e[I + 1 + D] === r) {\n                  E.push(e.substring(f, I).replace(O, t)), e[f = I + 1 + D + m] !== t && (I = e.indexOf(t, f)), S = e.indexOf(r, f), x = e.indexOf(i, f);\n                  break;\n                }\n\n                var A = F(x);\n\n                if (e.substr(I + 1 + A, g) === i) {\n                  if (E.push(e.substring(f, I).replace(O, t)), M(I + 1 + A + g), S = e.indexOf(r, f), I = e.indexOf(t, f), v && (U(), l)) return z();\n                  if (o && y.length >= o) return z(!0);\n                  break;\n                }\n\n                k.push({\n                  type: \"Quotes\",\n                  code: \"InvalidQuotes\",\n                  message: \"Trailing quote on quoted field is malformed\",\n                  row: y.length,\n                  index: f\n                }), I++;\n              }\n            } else I++;\n          }\n        }\n\n        return j();\n\n        function L(e) {\n          y.push(e), w = f;\n        }\n\n        function F(t) {\n          var r = 0;\n\n          if (-1 !== t) {\n            var i = e.substring(I + 1, t);\n            i && \"\" === i.trim() && (r = i.length);\n          }\n\n          return r;\n        }\n\n        function j(t) {\n          return d || (void 0 === t && (t = e.substr(f)), E.push(t), f = c, L(E), v && U()), z();\n        }\n\n        function M(t) {\n          f = t, L(E), E = [], x = e.indexOf(i, f);\n        }\n\n        function z(e, t) {\n          return {\n            data: t ? y[0] : y,\n            errors: k,\n            meta: {\n              delimiter: r,\n              linebreak: i,\n              aborted: l,\n              truncated: !!e,\n              cursor: w + (a || 0)\n            }\n          };\n        }\n\n        function U() {\n          s(z(void 0, !0)), y = [], k = [];\n        }\n\n        function q(i, n, s) {\n          var a = {\n            nextDelim: void 0,\n            quoteSearch: void 0\n          },\n              o = e.indexOf(t, n + 1);\n\n          if (n < i && i < o && (o < s || -1 === s)) {\n            var u = e.indexOf(r, o);\n            if (-1 === u) return a;\n            o < u && (o = e.indexOf(t, o + 1)), a = q(u, o, s);\n          } else a = {\n            nextDelim: i,\n            quoteSearch: n\n          };\n\n          return a;\n        }\n      }, this.abort = function () {\n        l = !0;\n      }, this.getCharIndex = function () {\n        return f;\n      };\n    }\n\n    function g(e) {\n      var t = e.data,\n          r = n[t.workerId],\n          i = !1;\n      if (t.error) r.userError(t.error, t.file);else if (t.results && t.results.data) {\n        var s = {\n          abort: function abort() {\n            i = !0, _(t.workerId, {\n              data: [],\n              errors: [],\n              meta: {\n                aborted: !0\n              }\n            });\n          },\n          pause: v,\n          resume: v\n        };\n\n        if (b(r.userStep)) {\n          for (var a = 0; a < t.results.data.length && (r.userStep({\n            data: t.results.data[a],\n            errors: t.results.errors,\n            meta: t.results.meta\n          }, s), !i); a++) {\n            ;\n          }\n\n          delete t.results;\n        } else b(r.userChunk) && (r.userChunk(t.results, s, t.file), delete t.results);\n      }\n      t.finished && !i && _(t.workerId, t.results);\n    }\n\n    function _(e, t) {\n      var r = n[e];\n      b(r.userComplete) && r.userComplete(t), r.terminate(), delete n[e];\n    }\n\n    function v() {\n      throw new Error(\"Not implemented.\");\n    }\n\n    function y(e) {\n      if (\"object\" != typeof e || null === e) return e;\n      var t = Array.isArray(e) ? [] : {};\n\n      for (var r in e) {\n        t[r] = y(e[r]);\n      }\n\n      return t;\n    }\n\n    function k(e, t) {\n      return function () {\n        e.apply(t, arguments);\n      };\n    }\n\n    function b(e) {\n      return \"function\" == typeof e;\n    }\n\n    return i && (t.onmessage = function (e) {\n      var r = e.data;\n      if (void 0 === a.WORKER_ID && r && (a.WORKER_ID = r.workerId), \"string\" == typeof r.input) t.postMessage({\n        workerId: a.WORKER_ID,\n        results: a.parse(r.input, r.config),\n        finished: !0\n      });else if (t.File && r.input instanceof File || r.input instanceof Object) {\n        var i = a.parse(r.input, r.config);\n        i && t.postMessage({\n          workerId: a.WORKER_ID,\n          results: i,\n          finished: !0\n        });\n      }\n    }), (h.prototype = Object.create(u.prototype)).constructor = h, (f.prototype = Object.create(u.prototype)).constructor = f, (l.prototype = Object.create(l.prototype)).constructor = l, (d.prototype = Object.create(u.prototype)).constructor = d, a;\n  }) ? i.apply(t, n) : i) || (e.exports = s);\n}]);"],"sourceRoot":""}